{"ast":null,"code":"import axios from \"axios\";\nimport PopUp1 from '../components/StockInfo.vue';\nimport PopUp2 from '../components/SubjectSubTotal.vue';\nlet url = \"http://phills2.gonetis.com:8000/kis/stockOrder/\"; //장고 서버 주소\n\nexport default {\n  data: () => {\n    return {\n      popupView1: false,\n      popupView2: false,\n      stock_asset_num: null,\n      stock_asset_risk_num: null,\n      StockOrderList: [],\n      OrderCompleteList: [],\n      radioSel: 'limit',\n      selected: 'B',\n      options: [{\n        text: '매수',\n        value: 'B'\n      }, {\n        text: '매도',\n        value: 'S'\n      }],\n      data: {\n        code: \"\",\n        name: \"\",\n        buy_price: \"\",\n        buy_amount: \"\",\n        sell_price: \"\",\n        sell_amount: \"\",\n        loss_price: \"\",\n        target_price: \"\"\n      },\n      upd: {\n        buy_price: \"\",\n        sell_price: \"\",\n        id: \"\",\n        trading_type: \"\",\n        order_no: \"\",\n        remain_qty: \"\"\n      },\n      date: new Date()\n    };\n  },\n  name: 'stockOrder',\n  components: {\n    PopUp1,\n    PopUp2\n  },\n  methods: {\n    sendForm: function () {\n      if (this.radioSel == 'market') {\n        this.data.buy_price = '-1';\n        this.data.sell_price = '-1';\n      } else if (this.radioSel == 'bflow') {\n        this.data.buy_amount = '0';\n        this.stock_asset_num = '0';\n      } else if (this.radioSel == 'loss') {\n        this.data.buy_amount = '0';\n      } else if (this.radioSel == 'sflow') {\n        this.data.sell_amount = '0';\n      } else if (this.radioSel == 'half') {\n        this.data.sell_amount = '0';\n        this.stock_asset_num = '0';\n      }\n      if (this.selected == 'B') {\n        axios({\n          method: \"POST\",\n          url: url,\n          data: {\n            acct_no: this.$route.params.acct_no,\n            code: this.data.code,\n            name: this.data.name,\n            buy_price: this.data.buy_price,\n            buy_amount: this.data.buy_amount,\n            sell_price: 0,\n            sell_amount: 0,\n            loss_price: this.data.loss_price,\n            target_price: this.data.target_price,\n            trading_type: \"B\",\n            asset_risk_num: this.stock_asset_risk_num,\n            asset_num: this.stock_asset_num,\n            proc_yn: \"N\",\n            order_no: \"0\",\n            order_stat: \"01\",\n            total_complete_qty: 0,\n            remain_qty: 0\n          }\n        }).then(response => {\n          this.StockOrderList = response.data;\n          console.log(\"Success\", response);\n          this.getOrderCompleteList();\n          this.getStockOrderList();\n        }).catch(error => {\n          console.log(\"Failed to StockOrderList\", error.response);\n        });\n      } else {\n        axios({\n          method: \"POST\",\n          url: url,\n          data: {\n            acct_no: this.$route.params.acct_no,\n            code: this.data.code,\n            name: this.data.name,\n            buy_price: 0,\n            buy_amount: 0,\n            sell_price: this.data.sell_price,\n            sell_amount: this.data.sell_amount,\n            loss_price: 0,\n            target_price: 0,\n            trading_type: \"S\",\n            asset_risk_num: this.stock_asset_risk_num,\n            asset_num: this.stock_asset_num,\n            proc_yn: \"N\",\n            order_no: \"0\",\n            order_stat: \"01\",\n            total_complete_qty: 0,\n            remain_qty: 0\n          }\n        }).then(response => {\n          this.StockOrderList = response.data;\n          console.log(\"Success\", response);\n          this.getOrderCompleteList();\n          this.getStockOrderList();\n        }).catch(error => {\n          console.log(\"Failed to StockOrderList\", error.response);\n        });\n      }\n    },\n    clearForm: function () {\n      this.data.code = \"\", this.data.name = \"\", this.data.buy_price = \"\", this.data.buy_amount = \"\", this.data.sell_price = \"\", this.data.sell_amount = \"\", this.data.loss_price = \"\", this.data.target_price = \"\";\n    },\n    deleteOrder: function (id) {\n      axios({\n        method: \"DELETE\",\n        url: url + id + \"/\" // http://phills2.gonetis.com:8000/kis/stockOrder/1 로 delete 이벤트 전송\n      }).then(response => {\n        console.log(\"Success\", response);\n        this.getOrderCompleteList();\n        this.getStockOrderList();\n      }).catch(error => {\n        console.log(\"Failed to deleteOrder\", error.response);\n      });\n    },\n    onlyStockOrder: function (data, StockOrderList) {\n      // 한개의 리스트만 보이도록\n      for (var index in StockOrderList) {\n        data.id != StockOrderList[index].id ? StockOrderList[index].is_hidden = false : \"\";\n      }\n    },\n    updateBuyOrder: function (data, id, order_no, remain_qty) {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/update/\",\n        params: {\n          id: id,\n          order_no: order_no,\n          buy_price: data.buy_price,\n          sell_price: 0,\n          order_amount: remain_qty,\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        console.log(\"Success\", response);\n        this.getOrderCompleteList();\n        this.getStockOrderList();\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to updateBuyOrder\", error.response);\n      });\n    },\n    updateSellOrder: function (data, id, order_no, remain_qty) {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/update/\",\n        params: {\n          id: id,\n          order_no: order_no,\n          buy_price: 0,\n          sell_price: data.sell_price,\n          order_amount: remain_qty,\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        console.log(\"Success\", response);\n        this.getOrderCompleteList();\n        this.getStockOrderList();\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to updateBuyOrder\", error.response);\n      });\n    },\n    cancelOrder: function (id, order_no, order_price, order_amount) {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/cancel/\",\n        params: {\n          id: id,\n          order_no: order_no,\n          order_price: order_price,\n          order_amount: order_amount,\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        this.StockOrderList = response.data;\n        console.log(\"Success\", response);\n        this.getOrderCompleteList();\n        this.getStockOrderList();\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to cancelOrder\", error.response);\n      });\n    },\n    openPopup1() {\n      this.popupView1 = this.popupView1 ? false : true;\n    },\n    openPopup2() {\n      this.popupView2 = this.popupView2 ? false : true;\n    },\n    sendLevel: function (level) {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockMarketMng/list/\",\n        params: {\n          market_level: level,\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        console.log(\"Success\", response);\n        alert(\"처리 완료\");\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to send StockMarketLevelMng\", error.response);\n      });\n    },\n    sendOrderList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/send/\",\n        params: {\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        this.StockOrderList = response.data;\n        console.log(\"Success\", response);\n        this.getOrderCompleteList();\n        this.getStockOrderList();\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to send OrderList\", error.response);\n      });\n    },\n    reload() {\n      this.getOrderCompleteList();\n      this.getStockOrderList();\n    },\n    getStockOrderList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/list/\",\n        params: {\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        this.StockOrderList = response.data;\n        this.stock_asset_num = response.data[0].stock_asset_num;\n        this.stock_asset_risk_num = response.data[0].stock_asset_risk_num;\n        console.log(\"Success\", response);\n        console.log(\"stock_asset_num : \", this.stock_asset_num);\n        console.log(\"stock_asset_risk_num : \", this.stock_asset_risk_num);\n      }).catch(error => {\n        console.log(\"Failed to get StockOrderList\", error.response);\n      });\n    },\n    getOrderCompleteList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrderComplete/\",\n        params: {\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        this.OrderCompleteList = response.data;\n        console.log(\"Success\", response);\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to get OrderCompleteList\", error.response);\n      });\n    },\n    formatDate(str) {\n      return str.split('T')[0];\n    }\n  },\n  created() {\n    this.getOrderCompleteList();\n    this.getStockOrderList();\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","PopUp1","PopUp2","url","data","popupView1","popupView2","stock_asset_num","stock_asset_risk_num","StockOrderList","OrderCompleteList","radioSel","selected","options","text","value","code","name","buy_price","buy_amount","sell_price","sell_amount","loss_price","target_price","upd","id","trading_type","order_no","remain_qty","date","Date","components","methods","sendForm","method","acct_no","$route","params","asset_risk_num","asset_num","proc_yn","order_stat","total_complete_qty","then","response","console","log","getOrderCompleteList","getStockOrderList","catch","error","clearForm","deleteOrder","onlyStockOrder","index","is_hidden","updateBuyOrder","order_amount","app_key","app_secret","access_token","alert","updateSellOrder","cancelOrder","order_price","openPopup1","openPopup2","sendLevel","level","market_level","sendOrderList","reload","formatDate","str","split","created"],"sourceRoot":"","sources":["/home/terra/Public/Frontend/fund_risk_management/src/views/StockOrder.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <v-container fluid>\r\n        <v-row align=\"center\">\r\n          <v-col cols=\"1\">\r\n            <v-subheader>\r\n              [주문]\r\n            </v-subheader>\r\n          </v-col>\r\n          <v-col cols=\"1\">\r\n            <select v-model=\"selected\">\r\n              <option v-for=\"(d, i) in options\" :key=\"i\" :value=\"d.value\">\r\n                {{ d.text }}\r\n              </option>\r\n            </select>\r\n          </v-col>\r\n          <v-col cols=\"4\" v-if=\"selected === 'B'\">\r\n            <label><input type=\"radio\" value=\"limit\" v-model=\"radioSel\">주문가</label>\r\n            <label>&nbsp;&nbsp;&nbsp;</label>\r\n            <label><input type=\"radio\" value=\"market\" v-model=\"radioSel\">시장가</label>\r\n            <label>&nbsp;&nbsp;&nbsp;</label>\r\n            <label><input type=\"radio\" value=\"bflow\" v-model=\"radioSel\">시장흐름정액</label>\r\n            <label>&nbsp;&nbsp;&nbsp;</label>\r\n            <label><input type=\"radio\" value=\"loss\" v-model=\"radioSel\">종목손실금액</label>\r\n          </v-col>\r\n          <v-col cols=\"4\" v-if=\"selected === 'S'\">\r\n            <label><input type=\"radio\" value=\"limit\" v-model=\"radioSel\">주문가</label>\r\n            <label>&nbsp;&nbsp;&nbsp;</label>\r\n            <label><input type=\"radio\" value=\"market\" v-model=\"radioSel\">시장가</label>\r\n            <label>&nbsp;&nbsp;&nbsp;</label>\r\n            <label><input type=\"radio\" value=\"sflow\" v-model=\"radioSel\">시장기준수량</label>\r\n            <label>&nbsp;&nbsp;&nbsp;</label>\r\n            <label><input type=\"radio\" value=\"half\" v-model=\"radioSel\">보유물량절반</label>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row v-if=\"selected === 'B'\">\r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.code\" :counter=\"6\" label=\"종목코드\" required></v-text-field>\r\n          </v-col>\r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.name\" label=\"종목명\" required></v-text-field>\r\n          </v-col>    \r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.buy_price\" label=\"주문단가\" ></v-text-field>\r\n          </v-col>    \r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.buy_amount\" label=\"주문수량\" ></v-text-field>\r\n          </v-col>\r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.loss_price\" label=\"손절가\" ></v-text-field>\r\n          </v-col>\r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.target_price\" label=\"목표가\" ></v-text-field>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row v-if=\"selected === 'S'\">\r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.code\" :counter=\"6\" label=\"종목코드\" required></v-text-field>\r\n          </v-col>\r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.name\" label=\"종목명\" required></v-text-field>\r\n          </v-col>    \r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.sell_price\" label=\"매도단가\" ></v-text-field>\r\n          </v-col>    \r\n          <v-col cols=\"1\" md=\"5\">\r\n            <v-text-field v-model=\"data.sell_amount\" label=\"매도수량\" ></v-text-field>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col>\r\n            <v-btn @click=\"clearForm\" style=\"background: gray\">초기화</v-btn>\r\n            <v-btn @click=\"sendForm\" style=\"background: mediumaquamarine\">저장</v-btn>\r\n            <v-btn @click=\"sendOrderList\" style=\"background: red\">전송</v-btn>\r\n            <v-btn @click=\"reload()\" style=\"background: skyblue\">주문갱신</v-btn>\r\n            <v-btn @click=\"openPopup1()\" style=\"background: pink\">종목시세</v-btn>            \r\n            <v-btn @click=\"openPopup2()\" style=\"background: orange\">수급잠정</v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n    </div>\r\n    <div class=\"popup-view\" :class=\"{active: popupView1}\">\r\n      <pop-up1 @close-popup=\"openPopup1()\"></pop-up1>\r\n    </div>\r\n    <div class=\"popup-view\" :class=\"{active: popupView2}\">\r\n      <pop-up2 @close-popup=\"openPopup2()\"></pop-up2>\r\n    </div>\r\n    <div>\r\n      <v-container fluid>\r\n        <v-row align=\"center\">\r\n          <v-col cols=\"20\">\r\n            <v-subheader>\r\n              [일별 주문 내역]\r\n            </v-subheader>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col cols=\"1\">종목코드</v-col>\r\n          <v-col cols=\"1\">종목명</v-col>\r\n          <v-col cols=\"1\">매수가</v-col>\r\n          <v-col cols=\"1\">매수량</v-col>\r\n          <v-col cols=\"1\">매도가</v-col>\r\n          <v-col cols=\"1\">매도량</v-col>\r\n          <v-col cols=\"1\">손절가</v-col>\r\n          <v-col cols=\"1\">목표가</v-col>\r\n          <v-col cols=\"1\">매매유형</v-col>\r\n          <v-col cols=\"1\">주문상태</v-col>\r\n          <v-col cols=\"1\">체결량</v-col>\r\n          <v-col cols=\"1\">잔여량</v-col>\r\n          <v-col cols=\"1\"></v-col>\r\n          <v-col cols=\"1\"></v-col>\r\n          <v-col cols=\"2\"></v-col>\r\n        </v-row>\r\n        <v-row v-for=\"(item, index) in StockOrderList\" v-bind:key=\"index\">\r\n          <v-col cols=\"1\">{{item.code}}</v-col>\r\n          <v-col cols=\"1\">{{item.name}}</v-col>\r\n          <v-col cols=\"1\">{{item.buy_price}}</v-col>\r\n          <v-col cols=\"1\">{{item.buy_amount}}</v-col>\r\n          <v-col cols=\"1\">{{item.sell_price}}</v-col>\r\n          <v-col cols=\"1\">{{item.sell_amount}}</v-col>\r\n          <v-col cols=\"1\">{{item.loss_price}}</v-col>\r\n          <v-col cols=\"1\">{{item.target_price}}</v-col>\r\n          <v-col cols=\"1\">{{item.trading_type}}</v-col>\r\n          <v-col cols=\"1\">{{item.order_stat}}</v-col>\r\n          <v-col cols=\"1\">{{item.total_complete_qty }}</v-col>\r\n          <v-col cols=\"1\">{{item.remain_qty }}</v-col>\r\n          <v-col cols=\"1\" v-if=\"item.proc_yn === 'N'\">\r\n            <v-btn @click=\"deleteOrder(item.id)\" color=\"#F44336\">삭제</v-btn> \r\n          </v-col>\r\n          <v-col cols=\"1\" v-if=\"item.remain_qty > 0 && item.order_stat != '04'\">\r\n            <v-btn @click=\"item.is_hidden = !item.is_hidden;onlyStockOrder(item, StockOrderList)\" color=\"gray\">변경</v-btn>\r\n            <v-btn v-if=\"item.trading_type === 'B'\" @click=\"cancelOrder(item.id, item.order_no, item.buy_price, item.remain_qty)\" color=\"gray\">취소</v-btn> \r\n            <v-btn v-if=\"item.trading_type === 'S'\" @click=\"cancelOrder(item.id, item.order_no, item.sell_price, item.remain_qty)\" color=\"gray\">취소</v-btn> \r\n          </v-col>\r\n          <v-col cols=\"2\">\r\n            <v-form v-show=\"item.is_hidden\">\r\n              <v-container>\r\n                <v-row v-if=\"item.trading_type === 'B'\">\r\n                  <v-col>\r\n                    <v-text-field v-model=\"data.buy_price\" label=\"주문단가\" ></v-text-field>\r\n                  </v-col>    \r\n                  <v-col>\r\n                    <v-btn @click=\"item.is_hidden = !item.is_hidden;updateBuyOrder(data, item.id, item.order_no, item.remain_qty);\" v-show=\"item.is_hidden\" color=\"#4CAF50\">전송</v-btn>\r\n                  </v-col>   \r\n                </v-row>\r\n                <v-row v-if=\"item.trading_type === 'S'\">\r\n                  <v-col>\r\n                    <v-text-field v-model=\"data.sell_price\" label=\"매도단가\" ></v-text-field>\r\n                  </v-col>    \r\n                  <v-col>\r\n                    <v-btn @click=\"item.is_hidden = !item.is_hidden;updateSellOrder(data, item.id, item.order_no, item.remain_qty);\" v-show=\"item.is_hidden\" color=\"#4CAF50\">전송</v-btn>\r\n                  </v-col>   \r\n                </v-row>\r\n              </v-container>\r\n            </v-form>\r\n          </v-col>\r\n        </v-row>  \r\n      </v-container>\r\n    </div>\r\n    <div>\r\n      <v-container fluid>\r\n        <v-row align=\"center\">\r\n          <v-col cols=\"11\">\r\n            <v-subheader>\r\n              [일별 주문 체결]\r\n            </v-subheader>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col>주문번호</v-col>\r\n          <v-col>원주문번호</v-col>\r\n          <v-col>주문구분</v-col>\r\n          <v-col>주문일자</v-col>\r\n          <v-col>주문시각</v-col>\r\n          <v-col>종목명</v-col>\r\n          <v-col>주문가</v-col>\r\n          <v-col>주문수량</v-col>\r\n          <v-col>총체결수량</v-col>\r\n          <v-col>잔여수량</v-col>\r\n          <v-col>총체결금액</v-col>\r\n        </v-row>\r\n        <v-row v-for=\"(item, index) in OrderCompleteList\" v-bind:key=\"index\">\r\n          <v-col>{{item.order_no}}</v-col>\r\n          <v-col>{{item.org_order_no}}</v-col>\r\n          <v-col>{{item.order_type}}</v-col>\r\n          <v-col>{{item.order_dt}}</v-col>\r\n          <v-col>{{item.order_tmd}}</v-col>\r\n          <v-col>{{item.name}}</v-col>\r\n          <v-col>{{item.order_price}}</v-col>\r\n          <v-col>{{item.order_amount}}</v-col>\r\n          <v-col>{{item.total_complete_qty}}</v-col>\r\n          <v-col>{{item.remain_qty}}</v-col>\r\n          <v-col>{{item.total_complete_amt}}</v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col>\r\n            <v-btn @click=\"sendLevel(1)\" style=\"background: gray\">[하락지속 기술적반등]</v-btn>\r\n            <v-btn @click=\"sendLevel(2)\" style=\"background: gray\">[단기추세 기술적반등]</v-btn>\r\n            <v-btn @click=\"sendLevel(3)\" style=\"background: gray\">[패턴 기술적반등]</v-btn>\r\n            <v-btn @click=\"sendLevel(4)\" style=\"background: green\">[추세전환 눌림반등]</v-btn>\r\n            <v-btn @click=\"sendLevel(5)\" style=\"background: blue\">[상승지속 기술적반등]</v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n    </div>  \r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport PopUp1 from '../components/StockInfo.vue'\r\nimport PopUp2 from '../components/SubjectSubTotal.vue'\r\n\r\nlet url = \"http://phills2.gonetis.com:8000/kis/stockOrder/\"; //장고 서버 주소\r\n\r\n  export default {\r\n\r\n    data: () => {\r\n        return {\r\n            popupView1: false,\r\n            popupView2: false,\r\n            stock_asset_num: null,\r\n            stock_asset_risk_num: null,\r\n            StockOrderList: [],\r\n            OrderCompleteList: [],\r\n            radioSel: 'limit',\r\n            selected: 'B',\r\n            options: [\r\n              { text: '매수', value: 'B' },\r\n              { text: '매도', value: 'S' }          \r\n            ],\r\n            data: {\r\n                code: \"\",\r\n                name: \"\",\r\n                buy_price: \"\",\r\n                buy_amount: \"\",\r\n                sell_price: \"\",\r\n                sell_amount: \"\",\r\n                loss_price: \"\",\r\n                target_price: \"\",\r\n            },\r\n            upd: {\r\n              buy_price: \"\",\r\n              sell_price: \"\",\r\n              id: \"\",\r\n              trading_type: \"\",\r\n              order_no: \"\",\r\n              remain_qty: \"\"\r\n            },\r\n            date: new Date(),\r\n        };\r\n    },\r\n    name: 'stockOrder',\r\n    components: {\r\n      PopUp1,\r\n      PopUp2\r\n    },\r\n    methods: {\r\n      sendForm: function() { \r\n        if (this.radioSel == 'market'){\r\n          this.data.buy_price = '-1'\r\n          this.data.sell_price = '-1'\r\n        }else if (this.radioSel == 'bflow'){\r\n          this.data.buy_amount = '0'\r\n          this.stock_asset_num = '0'\r\n        }else if (this.radioSel == 'loss'){\r\n          this.data.buy_amount = '0'\r\n        }else if (this.radioSel == 'sflow'){\r\n          this.data.sell_amount = '0'\r\n        }else if (this.radioSel == 'half'){\r\n          this.data.sell_amount = '0'\r\n          this.stock_asset_num = '0'\r\n        }\r\n\r\n        if (this.selected == 'B'){\r\n          axios({\r\n            method: \"POST\",\r\n            url: url,\r\n            data: {\r\n              acct_no: this.$route.params.acct_no,\r\n              code: this.data.code,\r\n              name: this.data.name,\r\n              buy_price: this.data.buy_price,\r\n              buy_amount: this.data.buy_amount,\r\n              sell_price: 0,\r\n              sell_amount: 0,\r\n              loss_price: this.data.loss_price,\r\n              target_price: this.data.target_price,\r\n              trading_type: \"B\",\r\n              asset_risk_num: this.stock_asset_risk_num,\r\n              asset_num: this.stock_asset_num,\r\n              proc_yn: \"N\",\r\n              order_no: \"0\",\r\n              order_stat: \"01\",\r\n              total_complete_qty: 0,\r\n              remain_qty: 0\r\n            }, \r\n          }).then((response) => {\r\n            this.StockOrderList = response.data;\r\n            console.log(\"Success\", response);\r\n            this.getOrderCompleteList();\r\n            this.getStockOrderList();            \r\n          }).catch((error) => {\r\n            console.log(\"Failed to StockOrderList\", error.response);\r\n          });\r\n        }else{\r\n          axios({\r\n            method: \"POST\",\r\n            url: url,\r\n            data: {\r\n              acct_no: this.$route.params.acct_no,\r\n              code: this.data.code,\r\n              name: this.data.name,\r\n              buy_price: 0,\r\n              buy_amount: 0,\r\n              sell_price: this.data.sell_price,\r\n              sell_amount: this.data.sell_amount,\r\n              loss_price: 0,\r\n              target_price: 0,\r\n              trading_type: \"S\",\r\n              asset_risk_num: this.stock_asset_risk_num,\r\n              asset_num: this.stock_asset_num,\r\n              proc_yn: \"N\",\r\n              order_no: \"0\",\r\n              order_stat: \"01\",\r\n              total_complete_qty: 0,\r\n              remain_qty: 0\r\n            }, \r\n          }).then((response) => {\r\n            this.StockOrderList = response.data;\r\n            console.log(\"Success\", response);\r\n            this.getOrderCompleteList();\r\n            this.getStockOrderList();\r\n          }).catch((error) => {\r\n            console.log(\"Failed to StockOrderList\", error.response);\r\n          });\r\n        }\r\n      },\r\n      clearForm: function() {\r\n        (this.data.code = \"\"),(this.data.name = \"\"),(this.data.buy_price = \"\"),(this.data.buy_amount = \"\"),(this.data.sell_price = \"\"),(this.data.sell_amount = \"\"),(this.data.loss_price = \"\"),(this.data.target_price = \"\");\r\n      },\r\n      deleteOrder: function(id){\r\n        axios({\r\n          method: \"DELETE\",\r\n          url: url + id + \"/\", // http://phills2.gonetis.com:8000/kis/stockOrder/1 로 delete 이벤트 전송\r\n        }).then((response) => {\r\n          console.log(\"Success\", response);\r\n          this.getOrderCompleteList();\r\n          this.getStockOrderList();\r\n        }).catch((error) => {\r\n          console.log(\"Failed to deleteOrder\", error.response);\r\n        });\r\n      },\r\n      onlyStockOrder: function(data, StockOrderList){\r\n        // 한개의 리스트만 보이도록\r\n        for (var index in StockOrderList){\r\n          data.id != StockOrderList[index].id ? (StockOrderList[index].is_hidden = false) : \"\";\r\n        }\r\n        \r\n      },\r\n      updateBuyOrder: function(data, id, order_no, remain_qty){\r\n        axios({\r\n          method: \"GET\",\r\n          url: \"http://phills2.gonetis.com:8000/stockOrder/update/\",\r\n          params:{\r\n            id: id,\r\n            order_no: order_no,\r\n            buy_price: data.buy_price,\r\n            sell_price: 0,\r\n            order_amount: remain_qty,\r\n            acct_no: this.$route.params.acct_no,\r\n            app_key: this.$route.params.app_key,\r\n            app_secret: this.$route.params.app_secret,\r\n            access_token: this.$route.params.access_token\r\n          }\r\n          \r\n        }).then(response => {\r\n          console.log(\"Success\", response)\r\n            this.getOrderCompleteList();\r\n            this.getStockOrderList();\r\n        }).catch(error => {\r\n          alert(\"처리 에러\")\r\n          console.log(\"Failed to updateBuyOrder\", error.response);\r\n        });\r\n      },\r\n      updateSellOrder: function(data, id, order_no, remain_qty){\r\n        axios({\r\n          method: \"GET\",\r\n          url: \"http://phills2.gonetis.com:8000/stockOrder/update/\",\r\n          params:{\r\n            id: id,\r\n            order_no: order_no,\r\n            buy_price: 0,\r\n            sell_price: data.sell_price,\r\n            order_amount: remain_qty,\r\n            acct_no: this.$route.params.acct_no,\r\n            app_key: this.$route.params.app_key,\r\n            app_secret: this.$route.params.app_secret,\r\n            access_token: this.$route.params.access_token\r\n          }\r\n          \r\n        }).then(response => {\r\n          console.log(\"Success\", response)\r\n            this.getOrderCompleteList();\r\n            this.getStockOrderList();\r\n        }).catch(error => {\r\n          alert(\"처리 에러\")\r\n          console.log(\"Failed to updateBuyOrder\", error.response);\r\n        });\r\n      },\r\n      cancelOrder: function(id, order_no, order_price, order_amount){\r\n        axios({\r\n          method: \"GET\",\r\n          url: \"http://phills2.gonetis.com:8000/stockOrder/cancel/\",\r\n          params:{\r\n            id: id,\r\n            order_no: order_no,\r\n            order_price: order_price,\r\n            order_amount: order_amount,\r\n            acct_no: this.$route.params.acct_no,\r\n            app_key: this.$route.params.app_key,\r\n            app_secret: this.$route.params.app_secret,\r\n            access_token: this.$route.params.access_token\r\n          }\r\n        }).then(response => {\r\n            this.StockOrderList = response.data;\r\n            console.log(\"Success\", response);\r\n            this.getOrderCompleteList();\r\n            this.getStockOrderList();\r\n        }).catch(error => {\r\n            alert(\"처리 에러\")\r\n            console.log(\"Failed to cancelOrder\", error.response);\r\n        });\r\n      },\r\n      openPopup1() {\r\n        this.popupView1 = (this.popupView1) ? false : true\r\n      },\r\n      openPopup2(){\r\n        this.popupView2 = (this.popupView2) ? false : true\r\n      },\r\n      sendLevel: function(level){\r\n        axios({\r\n          method: \"GET\",\r\n          url: \"http://phills2.gonetis.com:8000/stockMarketMng/list/\",\r\n          params:{\r\n            market_level: level,\r\n            acct_no: this.$route.params.acct_no,\r\n            app_key: this.$route.params.app_key,\r\n            app_secret: this.$route.params.app_secret,\r\n            access_token: this.$route.params.access_token\r\n          }\r\n          \r\n        }).then(response => {\r\n          console.log(\"Success\", response)\r\n          alert(\"처리 완료\")\r\n        }).catch(error => {\r\n          alert(\"처리 에러\")\r\n          console.log(\"Failed to send StockMarketLevelMng\", error.response);\r\n        });\r\n      },\r\n      sendOrderList() {\r\n        axios({\r\n          method: \"GET\",\r\n          url: \"http://phills2.gonetis.com:8000/stockOrder/send/\",\r\n          params:{\r\n            acct_no: this.$route.params.acct_no,\r\n            app_key: this.$route.params.app_key,\r\n            app_secret: this.$route.params.app_secret,\r\n            access_token: this.$route.params.access_token\r\n          }\r\n        }).then(response => {\r\n            this.StockOrderList = response.data;\r\n            console.log(\"Success\", response);\r\n            this.getOrderCompleteList();\r\n            this.getStockOrderList();\r\n        }).catch(error => {\r\n            alert(\"처리 에러\")\r\n            console.log(\"Failed to send OrderList\", error.response);\r\n        });\r\n      },\r\n      reload(){\r\n        this.getOrderCompleteList();\r\n        this.getStockOrderList();\r\n      },  \r\n      getStockOrderList() {\r\n        axios({\r\n          method: \"GET\",\r\n          url: \"http://phills2.gonetis.com:8000/stockOrder/list/\",\r\n          params:{\r\n            acct_no: this.$route.params.acct_no,\r\n            app_key: this.$route.params.app_key,\r\n            app_secret: this.$route.params.app_secret,\r\n            access_token: this.$route.params.access_token\r\n          }\r\n        }).then(response => {\r\n            this.StockOrderList = response.data;\r\n            this.stock_asset_num = response.data[0].stock_asset_num\r\n            this.stock_asset_risk_num = response.data[0].stock_asset_risk_num\r\n            console.log(\"Success\", response);\r\n            console.log(\"stock_asset_num : \", this.stock_asset_num);\r\n            console.log(\"stock_asset_risk_num : \", this.stock_asset_risk_num);\r\n        }).catch(error => {\r\n            console.log(\"Failed to get StockOrderList\", error.response);\r\n        });\r\n      },\r\n      getOrderCompleteList() {\r\n        axios({\r\n          method: \"GET\",\r\n          url: \"http://phills2.gonetis.com:8000/stockOrderComplete/\",\r\n          params:{\r\n            acct_no: this.$route.params.acct_no,\r\n            app_key: this.$route.params.app_key,\r\n            app_secret: this.$route.params.app_secret,\r\n            access_token: this.$route.params.access_token\r\n          }\r\n        }).then(response => {\r\n            this.OrderCompleteList = response.data;\r\n            console.log(\"Success\", response);\r\n        }).catch(error => {\r\n            alert(\"처리 에러\")\r\n            console.log(\"Failed to get OrderCompleteList\", error.response);\r\n        });\r\n      },\r\n      formatDate(str){\r\n        return str.split('T')[0];\r\n      },    \r\n    },\r\n    created(){\r\n      this.getOrderCompleteList();\r\n      this.getStockOrderList();\r\n    }\r\n  };\r\n  \r\n</script>\r\n<style>\r\n.popup-view{\r\n  opacity: 0;\r\n  display: none;\r\n  visibility: hidden;\r\n}\r\n.active{\r\n  opacity: 1;\r\n  display: block;\r\n  visibility: visible;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}