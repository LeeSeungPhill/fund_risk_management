{"ast":null,"code":"import { ref, onBeforeMount, defineComponent } from 'vue';\nimport axios from \"axios\";\nimport { AgGridVue } from 'ag-grid-vue3';\nimport 'ag-grid-community/styles/ag-grid.css';\nimport 'ag-grid-community/styles/ag-theme-balham.css';\nimport 'ag-grid-community/styles/ag-theme-quartz.css';\nexport default defineComponent({\n  name: 'App',\n  components: {\n    AgGridVue\n  },\n  setup() {\n    const tooltipShowDelay = ref(null);\n    const tooltipHideDelay = ref(null);\n    const defaultColDef1 = ref({\n      flex: 1,\n      minWidth: 100\n      //editable: true,\n    });\n\n    const defaultColDef2 = ref({\n      flex: 1,\n      minWidth: 100\n      //editable: true,\n    });\n\n    onBeforeMount(() => {\n      tooltipShowDelay.value = 0;\n      tooltipHideDelay.value = 2000;\n    });\n    const colDefs1 = ref([{\n      headerName: 'No',\n      colId: 0,\n      valueGetter: params => {\n        return params.node.rowIndex + 1;\n      }\n    }, {\n      headerName: '종목코드',\n      field: 'code'\n    }, {\n      headerName: '종목명',\n      field: 'name',\n      tooltipField: 'name'\n    }, {\n      headerName: '수급주체',\n      field: 'tr_subject'\n    }, {\n      headerName: '순거래합산',\n      field: 'volumn',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }]);\n    const colDefs2 = ref([{\n      headerName: 'No',\n      colId: 0,\n      valueGetter: params => {\n        return params.node.rowIndex + 1;\n      }\n    }, {\n      headerName: '종목코드',\n      field: 'code'\n    }, {\n      headerName: '종목명',\n      field: 'name',\n      tooltipField: 'name'\n    }, {\n      headerName: '수급주체',\n      field: 'tr_subject'\n    }, {\n      headerName: '순거래합산',\n      field: 'volumn',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }]);\n    return {\n      defaultColDef1,\n      colDefs1,\n      defaultColDef2,\n      colDefs2,\n      tooltipShowDelay,\n      tooltipHideDelay\n    };\n  },\n  data() {\n    return {\n      result: null,\n      rowData1: [],\n      rowData2: [],\n      yyyy: null,\n      mm: null,\n      dd: null,\n      hour: null,\n      minute: null,\n      charturl: null,\n      selected1: '순매수',\n      options1: [{\n        text: '순매수',\n        value: '순매수'\n      }, {\n        text: '순매도',\n        value: '순매도'\n      }],\n      selected2: '코스피',\n      options2: [{\n        text: '코스피',\n        value: '코스피'\n      }, {\n        text: '코스닥',\n        value: '코스닥'\n      }],\n      data: {\n        tr_subject: null,\n        tr_type: null,\n        market_type: null\n      }\n    };\n  },\n  methods: {\n    onCellClicked: e => {\n      let charturl = null;\n      if (e.column.colId === 'code') {\n        axios({\n          method: \"GET\",\n          url: \"http://phills2.asuscomm.com:8000/stockOrder/chart/\",\n          params: {\n            code: e.data.code.trim(),\n            company: e.data.name.trim()\n          }\n        }).then(response => {\n          console.log(\"Success\", response);\n          charturl = \"http://phills2.asuscomm.com:8000/stockOrder/\" + response.data[0].name + \"/\";\n          window.open(charturl, \"PopupWin\", \"width=1000,height=1000\", true);\n          charturl = null;\n        }).catch(error => {\n          alert(\"처리 에러\");\n          console.log(\"Failed to doInfo\", error.response);\n        });\n        if (charturl != null) window.open(charturl, \"PopupWin\", \"width=1000,height=1000\", true);\n      }\n      if (e.column.colId === 'name') {\n        axios({\n          method: \"GET\",\n          url: \"http://phills2.asuscomm.com:8000/stockOrder/minutesInfo/\",\n          params: {\n            code: e.data.code.trim(),\n            company: e.data.name.trim(),\n            app_key: e.data.app_key,\n            app_secret: e.data.app_secret,\n            access_token: e.data.access_token\n          }\n        }).then(response => {\n          console.log(\"Success\", response);\n          charturl = \"http://phills2.asuscomm.com:8000/stockOrder/minutes_\" + response.data[0].name + \"/\";\n          window.open(charturl, \"PopupWin\", \"width=1000,height=1000\", true);\n          charturl = null;\n        }).catch(error => {\n          alert(\"처리 에러\");\n          console.log(\"Failed to minutesInfo\", error.response);\n        });\n        if (charturl != null) window.open(charturl, \"PopupWin\", \"width=1000,height=1000\", true);\n      }\n    },\n    fetchData: function () {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.asuscomm.com:8000/stockOrder/subTotal/\",\n        params: {\n          tr_subject: '기관',\n          tr_type: this.selected1,\n          market_type: this.selected2\n        }\n      }).then(response => {\n        console.log(\"Success\", response.data);\n        this.rowData1 = response.data;\n        this.yyyy = response.data[0].tr_day.substr(0, 4) + \"년\";\n        this.mm = response.data[0].tr_day.substr(4, 2) + \"월\";\n        this.dd = response.data[0].tr_day.substr(6, 2) + \"일\";\n        this.hour = response.data[0].tr_time.substr(0, 2) + \"시\";\n        this.minute = response.data[0].tr_time.substr(2, 2) + \"분\";\n        this.rowData1.forEach(data => {\n          data.acct_no = this.$route.params.acct_no;\n        });\n        this.rowData1.forEach(data => {\n          data.app_key = this.$route.params.app_key;\n        });\n        this.rowData1.forEach(data => {\n          data.app_secret = this.$route.params.app_secret;\n        });\n        this.rowData1.forEach(data => {\n          data.access_token = this.$route.params.access_token;\n        });\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to fetchData\", error.response);\n      });\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.asuscomm.com:8000/stockOrder/subTotal/\",\n        params: {\n          tr_subject: '외국인',\n          tr_type: this.selected1,\n          market_type: this.selected2\n        }\n      }).then(response => {\n        console.log(\"Success\", response.data);\n        this.rowData2 = response.data;\n        this.rowData2.forEach(data => {\n          data.acct_no = this.$route.params.acct_no;\n        });\n        this.rowData2.forEach(data => {\n          data.app_key = this.$route.params.app_key;\n        });\n        this.rowData2.forEach(data => {\n          data.app_secret = this.$route.params.app_secret;\n        });\n        this.rowData2.forEach(data => {\n          data.access_token = this.$route.params.access_token;\n        });\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to fetchData\", error.response);\n      });\n    }\n  },\n  created() {\n    this.fetchData();\n  }\n});","map":{"version":3,"mappings":"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","names":["ref","onBeforeMount","defineComponent","axios","AgGridVue","name","components","setup","tooltipShowDelay","tooltipHideDelay","defaultColDef1","flex","minWidth","defaultColDef2","value","colDefs1","headerName","colId","valueGetter","params","node","rowIndex","field","tooltipField","valueFormatter","toLocaleString","colDefs2","data","result","rowData1","rowData2","yyyy","mm","dd","hour","minute","charturl","selected1","options1","text","selected2","options2","tr_subject","tr_type","market_type","methods","onCellClicked","e","column","method","url","code","trim","company","then","response","console","log","window","open","catch","error","alert","app_key","app_secret","access_token","fetchData","tr_day","substr","tr_time","forEach","acct_no","$route","created"],"sourceRoot":"","sources":["/home/terra/Github/fund_risk_management/src/components/SubjectSubTotal.vue"],"sourcesContent":["<template>\n  <div>\n    <v-container>\n        <v-row>\n          <v-col align=\"center\" colspan=\"2\">\n            <v-subheader>\n              [장중 투자자별 매매 상위 - {{this.yyyy}} {{this.mm}} {{this.dd}} {{this.hour}} {{this.minute}} 기준]\n            </v-subheader>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col colspan=\"2\" align=\"center\" >\n            [매매유형]\n            <select v-model=\"selected1\" @change=\"fetchData\">\n              <option v-for=\"(d, i) in options1\" :key=\"i\" :value=\"d.value\">\n                {{ d.text }}\n              </option>\n            </select>\n            [시장구분]\n            <select v-model=\"selected2\" @change=\"fetchData\">\n              <option v-for=\"(d, i) in options2\" :key=\"i\" :value=\"d.value\">\n                {{ d.text }}\n              </option>\n            </select>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col align=\"left\" >[기관]</v-col>\n          <v-col align=\"left\" >[외국인]</v-col>\n        </v-row>  \n        <v-row>\n          <v-col align=\"center\" >\n            <ag-grid-vue \n                  style=\"width: 100%; height: 350px;\" \n                  class=\"ag-theme-balham\" \n                  :columnDefs=\"colDefs1\" \n                  :rowData=\"rowData1\" \n                  :paginationAutoPageSize=\"true\"\n                  :pagination=\"true\"\n                  :defaultColDef=\"defaultColDef1\"\n                  :tooltipShowDelay=\"tooltipShowDelay\"\n                  :tooltipHideDelay=\"tooltipHideDelay\"\n                  @cellClicked=\"onCellClicked\"\n            />\n          </v-col>\n          <v-col align=\"center\" >\n            <ag-grid-vue \n                  style=\"width: 100%; height: 350px;\" \n                  class=\"ag-theme-balham\" \n                  :columnDefs=\"colDefs2\" \n                  :rowData=\"rowData2\" \n                  :paginationAutoPageSize=\"true\"\n                  :pagination=\"true\"\n                  :defaultColDef=\"defaultColDef2\"\n                  :tooltipShowDelay=\"tooltipShowDelay\"\n                  :tooltipHideDelay=\"tooltipHideDelay\"\n                  @cellClicked=\"onCellClicked\"\n            />\n          </v-col>  \n        </v-row>\n\n    </v-container>      \n  </div>\n</template>\n<script>\n  import { ref, onBeforeMount, defineComponent } from 'vue';\n  import axios from \"axios\";\n  import {AgGridVue} from 'ag-grid-vue3';\n  import 'ag-grid-community/styles/ag-grid.css';\n  import 'ag-grid-community/styles/ag-theme-balham.css';\n  import 'ag-grid-community/styles/ag-theme-quartz.css';\n\n  export default defineComponent({\n  name: 'App',\n  components:{\n    AgGridVue\n  },\n  setup(){\n\n    const tooltipShowDelay = ref(null);\n    const tooltipHideDelay = ref(null);\n\n    const defaultColDef1 = ref({\n      flex: 1,\n      minWidth: 100,\n      //editable: true,\n    });\n\n    const defaultColDef2 = ref({\n      flex: 1,\n      minWidth: 100,\n      //editable: true,\n    });\n\n    onBeforeMount(() => {\n      tooltipShowDelay.value = 0;\n      tooltipHideDelay.value = 2000;\n    });\n\n    const colDefs1 = ref([\n      {headerName: 'No', colId: 0, valueGetter: (params) => { return params.node.rowIndex + 1 } },\n      {headerName: '종목코드', field: 'code'},\n      {headerName: '종목명', field: 'name', tooltipField: 'name'},\n      {headerName: '수급주체', field: 'tr_subject'},\n      {headerName: '순거래합산', field: 'volumn', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n    ]);\n\n    const colDefs2 = ref([\n      {headerName: 'No', colId: 0, valueGetter: (params) => { return params.node.rowIndex + 1 } },\n      {headerName: '종목코드', field: 'code'},\n      {headerName: '종목명', field: 'name', tooltipField: 'name'},\n      {headerName: '수급주체', field: 'tr_subject'},\n      {headerName: '순거래합산', field: 'volumn', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n    ]);\n\n    return {\n      defaultColDef1,\n      colDefs1,\n      defaultColDef2,\n      colDefs2,\n      tooltipShowDelay,\n      tooltipHideDelay,\n    }\n  },  \n  data() {\n      return {\n          result: null,\n          rowData1: [],\n          rowData2: [],\n          yyyy: null,\n          mm: null,\n          dd: null,\n          hour: null,\n          minute: null,\n          charturl: null,\n          selected1: '순매수',\n          options1: [\n            { text: '순매수', value: '순매수' },\n            { text: '순매도', value: '순매도' }          \n          ],\n          selected2: '코스피',\n          options2: [\n            { text: '코스피', value: '코스피' },\n            { text: '코스닥', value: '코스닥' }          \n          ],  \n          data: {\n            tr_subject: null,\n            tr_type: null,\n            market_type: null,\n          }\n        };\n    },\n    methods : {\n      onCellClicked: (e) =>{\n        let charturl = null;\n                  \n        if(e.column.colId === 'code'){\n          axios({\n            method: \"GET\",\n            url: \"http://phills2.asuscomm.com:8000/stockOrder/chart/\",\n            params:{\n              code: e.data.code.trim(),\n              company: e.data.name.trim(),\n            }\n                                                  \n          }).then(response => {\n            console.log(\"Success\", response)\n            charturl = \"http://phills2.asuscomm.com:8000/stockOrder/\"+response.data[0].name+\"/\"\n            window.open(charturl, \"PopupWin\", \"width=1000,height=1000\", true); \n            charturl = null\n          }).catch(error => {\n            alert(\"처리 에러\")\n            console.log(\"Failed to doInfo\", error.response);\n          }); \n          if(charturl != null) \n            window.open(charturl, \"PopupWin\", \"width=1000,height=1000\", true); \n        }    \n\n        if(e.column.colId === 'name'){  \n          axios({\n            method: \"GET\",\n            url: \"http://phills2.asuscomm.com:8000/stockOrder/minutesInfo/\",\n            params:{\n              code: e.data.code.trim(),\n              company: e.data.name.trim(),\n              app_key: e.data.app_key,\n              app_secret: e.data.app_secret,\n              access_token: e.data.access_token\n            }\n                                      \n          }).then(response => {\n            console.log(\"Success\", response)\n            charturl = \"http://phills2.asuscomm.com:8000/stockOrder/minutes_\"+response.data[0].name+\"/\"\n            window.open(charturl, \"PopupWin\", \"width=1000,height=1000\", true); \n            charturl = null\n          }).catch(error => {\n            alert(\"처리 에러\")\n            console.log(\"Failed to minutesInfo\", error.response);\n          }); \n          if(charturl != null) \n            window.open(charturl, \"PopupWin\", \"width=1000,height=1000\", true); \n        }\n      },\n      fetchData: function(){\n        axios({\n          method: \"GET\",\n          url: \"http://phills2.asuscomm.com:8000/stockOrder/subTotal/\",\n          params:{\n            tr_subject: '기관',\n            tr_type: this.selected1,\n            market_type: this.selected2            \n          }\n          \n        }).then(response => {\n          console.log(\"Success\", response.data)\n          this.rowData1 = response.data;\n          this.yyyy = response.data[0].tr_day.substr(0,4) + \"년\";\n          this.mm = response.data[0].tr_day.substr(4,2) + \"월\";\n          this.dd = response.data[0].tr_day.substr(6,2) + \"일\";\n          this.hour = response.data[0].tr_time.substr(0,2) + \"시\";\n          this.minute = response.data[0].tr_time.substr(2,2) + \"분\";\n          this.rowData1.forEach(data => {data.acct_no = this.$route.params.acct_no})\n          this.rowData1.forEach(data => {data.app_key = this.$route.params.app_key})\n          this.rowData1.forEach(data => {data.app_secret = this.$route.params.app_secret})\n          this.rowData1.forEach(data => {data.access_token = this.$route.params.access_token})\n        }).catch(error => {\n          alert(\"처리 에러\")\n          console.log(\"Failed to fetchData\", error.response);\n        });\n        axios({\n          method: \"GET\",\n          url: \"http://phills2.asuscomm.com:8000/stockOrder/subTotal/\",\n          params:{\n            tr_subject: '외국인',\n            tr_type: this.selected1,\n            market_type: this.selected2            \n          }\n          \n        }).then(response => {\n          console.log(\"Success\", response.data)\n          this.rowData2 = response.data;\n          this.rowData2.forEach(data => {data.acct_no = this.$route.params.acct_no})\n          this.rowData2.forEach(data => {data.app_key = this.$route.params.app_key})\n          this.rowData2.forEach(data => {data.app_secret = this.$route.params.app_secret})\n          this.rowData2.forEach(data => {data.access_token = this.$route.params.access_token})\n        }).catch(error => {\n          alert(\"처리 에러\")\n          console.log(\"Failed to fetchData\", error.response);\n        });\n      },\n    },\n    created() { \n      this.fetchData();\n    }\n  });\n</script>\n  \n\n  \n  \n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}