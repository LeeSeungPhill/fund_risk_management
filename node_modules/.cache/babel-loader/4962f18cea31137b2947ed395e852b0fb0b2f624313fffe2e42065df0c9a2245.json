{"ast":null,"code":"import axios from \"axios\";\nimport PopUp1 from '../components/OrderInfo.vue';\nimport PopUp2 from '../components/StockInfo.vue';\nimport PopUp3 from '../components/SubjectSubTotal.vue';\nimport PopUp4 from '../components/InterestItem.vue';\nimport PopUp5 from '../components/StockSearch.vue';\nimport { ref, defineComponent } from 'vue';\nimport { AgGridVue } from 'ag-grid-vue3';\nimport 'ag-grid-community/styles/ag-grid.css';\nimport 'ag-grid-community/styles/ag-theme-balham.css';\nimport 'ag-grid-community/styles/ag-theme-quartz.css';\nlet url = \"http://phills2.gonetis.com:8000/kis/stockOrder/\"; //장고 서버 주소\n\nexport default defineComponent({\n  name: 'App',\n  components: {\n    AgGridVue,\n    PopUp1,\n    PopUp2,\n    PopUp3,\n    PopUp4,\n    PopUp5\n  },\n  setup() {\n    const defaultColDef1 = ref({\n      flex: 1,\n      minWidth: 100\n      //editable: true,\n    });\n\n    const defaultColDef2 = ref({\n      flex: 1,\n      minWidth: 100\n      //editable: true,\n    });\n\n    const colDefs1 = ref([{\n      headerName: 'No',\n      colId: 0,\n      valueGetter: params => {\n        return params.node.rowIndex + 1;\n      }\n    }, {\n      headerName: '선택',\n      field: 'chk',\n      editable: true,\n      cellRenderer: 'agCheckboxCellRenderer',\n      cellEditor: 'agCheckboxCellEditor'\n    }, {\n      headerName: '종목코드',\n      field: 'code'\n    }, {\n      headerName: '종목명',\n      field: 'name'\n    }, {\n      headerName: '매수가',\n      field: 'buy_price',\n      valueSetter: params => {\n        if (params.data.order_stat === '02' || params.data.order_stat === '05') {\n          params.data.buy_price = params.newValue;\n          axios({\n            method: \"GET\",\n            url: \"http://phills2.gonetis.com:8000/stockOrder/update/\",\n            params: {\n              id: params.data.id,\n              order_no: params.data.order_no,\n              buy_price: params.newValue,\n              sell_price: 0,\n              order_amount: params.data.remain_qty,\n              acct_no: params.data.acct_no,\n              app_key: params.data.app_key,\n              app_secret: params.data.app_secret,\n              access_token: params.data.access_token\n            }\n          }).then(response => {\n            console.log(\"Success\", response);\n            alert(\"매수가변경 완료\");\n            if (response.data[0].message != \"\") alert(response.data[0].message);\n          }).catch(error => {\n            alert(\"매수가변경 실패\");\n            console.log(\"Failed to updateBuyOrder\", error.response);\n          });\n          return true;\n        } else {\n          return false;\n        }\n      },\n      editable: true,\n      cellEditor: 'agTextCellEditor',\n      cellEditorParams: {\n        min: 0,\n        max: 9999999\n      },\n      valueFormatter: params => {\n        return '￦' + params.value.toLocaleString();\n      }\n    }, {\n      headerName: '매수량',\n      field: 'buy_amount',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }, {\n      headerName: '매도가',\n      field: 'sell_price',\n      valueSetter: params => {\n        if (params.data.order_stat === '02' || params.data.order_stat === '05') {\n          params.data.sell_price = params.newValue;\n          axios({\n            method: \"GET\",\n            url: \"http://phills2.gonetis.com:8000/stockOrder/update/\",\n            params: {\n              id: params.data.id,\n              order_no: params.data.order_no,\n              buy_price: 0,\n              sell_price: params.newValue,\n              order_amount: params.data.remain_qty,\n              acct_no: params.data.acct_no,\n              app_key: params.data.app_key,\n              app_secret: params.data.app_secret,\n              access_token: params.data.access_token\n            }\n          }).then(response => {\n            console.log(\"Success\", response);\n            alert(\"매도가변경 완료\");\n            if (response.data[0].message != \"\") alert(response.data[0].message);\n          }).catch(error => {\n            alert(\"매도가변경 실패\");\n            console.log(\"Failed to updateBuyOrder\", error.response);\n          });\n          return true;\n        } else {\n          return false;\n        }\n      },\n      editable: true,\n      cellEditor: 'agTextCellEditor',\n      cellEditorParams: {\n        min: 0,\n        max: 9999999\n      },\n      valueFormatter: params => {\n        return '￦' + params.value.toLocaleString();\n      }\n    }, {\n      headerName: '매도량',\n      field: 'sell_amount',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }, {\n      headerName: '손절가',\n      field: 'loss_price',\n      valueFormatter: params => {\n        return '￦' + params.value.toLocaleString();\n      }\n    }, {\n      headerName: '목표가',\n      field: 'target_price',\n      valueFormatter: params => {\n        return '￦' + params.value.toLocaleString();\n      }\n    }, {\n      headerName: '매매유형',\n      field: 'trading_type',\n      valueFormatter: params => {\n        return params.value === 'B' ? '매수' : params.value === 'S' ? '매도' : '';\n      }\n    }, {\n      headerName: '주문번호',\n      field: 'order_no'\n    }, {\n      headerName: '주문상태',\n      field: 'order_stat',\n      valueFormatter: params => {\n        return params.value === '01' ? '주문등록' : params.value === '02' ? '주문전송' : params.value === '03' ? '주문체결' : params.value === '04' ? '주문취소' : params.value === '05' ? '주문정정' : '';\n      }\n    }, {\n      headerName: '체결량',\n      field: 'total_complete_qty',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }, {\n      headerName: '잔여량',\n      field: 'remain_qty',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }]);\n    const colDefs2 = ref([{\n      headerName: 'No',\n      colId: 0,\n      valueGetter: params => {\n        return params.node.rowIndex + 1;\n      }\n    }, {\n      headerName: '주문번호',\n      field: 'order_no'\n    }, {\n      headerName: '원주문번호',\n      field: 'org_order_no'\n    }, {\n      headerName: '주문구분',\n      field: 'order_type'\n    }, {\n      headerName: '주문일자',\n      field: 'order_dt',\n      valueFormatter: params => {\n        return params.value.substr(0, 4) + \"-\" + params.value.substr(4, 2) + \"-\" + params.value.substr(6, 2);\n      }\n    }, {\n      headerName: '주문시각',\n      field: 'order_tmd',\n      valueFormatter: params => {\n        return params.value.substr(0, 2) + \":\" + params.value.substr(2, 2) + \":\" + params.value.substr(4, 2);\n      }\n    }, {\n      headerName: '종목명',\n      field: 'name',\n      tooltip: true,\n      tolltipField: 'name'\n    }, {\n      headerName: '주문가',\n      field: 'order_price',\n      valueFormatter: params => {\n        return '￦' + params.value.toLocaleString();\n      }\n    }, {\n      headerName: '주문수량',\n      field: 'order_amount',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }, {\n      headerName: '총체결수량',\n      field: 'total_complete_qty',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }, {\n      headerName: '잔여수량',\n      field: 'remain_qty',\n      valueFormatter: params => {\n        return params.value.toLocaleString() + '주';\n      }\n    }, {\n      headerName: '총체결금액',\n      field: 'total_complete_amt',\n      valueFormatter: params => {\n        return '￦' + params.value.toLocaleString();\n      }\n    }]);\n    return {\n      defaultColDef1,\n      colDefs1,\n      defaultColDef2,\n      colDefs2\n    };\n  },\n  data: () => {\n    return {\n      popupView1: false,\n      popupView2: false,\n      popupView3: false,\n      popupView4: false,\n      popupView5: false,\n      rowData1: [],\n      rowData2: [],\n      radioSel: 'limit',\n      selected: 'B',\n      options: [{\n        text: '매수',\n        value: 'B'\n      }, {\n        text: '매도',\n        value: 'S'\n      }],\n      data: {\n        code: \"\",\n        name: \"\",\n        buy_price: \"\",\n        buy_amount: \"\",\n        sell_price: \"\",\n        sell_amount: \"\",\n        loss_price: \"\",\n        target_price: \"\"\n      }\n    };\n  },\n  methods: {\n    deleteOrder: function () {\n      this.rowData1.forEach(data => {\n        if (data.chk) {\n          if (data.order_stat === '01') {\n            axios({\n              method: \"DELETE\",\n              url: url + data.id + \"/\" // http://phills2.gonetis.com:8000/kis/stockOrder/1 로 delete 이벤트 전송\n            }).then(response => {\n              console.log(\"Success\", response);\n              alert(\"주문삭제 완료\");\n              this.getOrderCompleteList();\n              this.getStockOrderList();\n            }).catch(error => {\n              console.log(\"Failed to deleteOrder\", error.response);\n              alert(\"주문삭제 실패\");\n            });\n          } else {\n            alert(\"주문삭제 대상 주문상태가 아닙니다.\");\n          }\n        }\n      });\n    },\n    cancelOrder: function () {\n      this.rowData1.forEach(data => {\n        if (data.chk) {\n          if (data.order_stat === '02' || data.order_stat === '03' || data.order_stat === '05') {\n            let order_price = 0;\n            if (data.trading_type === 'B') {\n              order_price = data.buy_price;\n            } else {\n              order_price = data.sell_price;\n            }\n            axios({\n              method: \"GET\",\n              url: \"http://phills2.gonetis.com:8000/stockOrder/cancel/\",\n              params: {\n                id: data.id,\n                order_no: data.order_no,\n                order_price: order_price,\n                order_amount: data.remain_qty,\n                acct_no: data.acct_no,\n                app_key: data.app_key,\n                app_secret: data.app_secret,\n                access_token: data.access_token\n              }\n            }).then(response => {\n              console.log(\"Success\", response);\n              alert(\"주문취소 완료\");\n              this.getOrderCompleteList();\n              this.getStockOrderList();\n            }).catch(error => {\n              console.log(\"Failed to cancelOrder\", error.response);\n              alert(\"주문취소 실패\");\n            });\n          } else {\n            alert(\"주문취소 대상 주문상태가 아닙니다.\");\n          }\n        }\n      });\n    },\n    openPopup1() {\n      this.popupView1 = this.popupView1 ? false : true;\n    },\n    openPopup2() {\n      this.popupView2 = this.popupView2 ? false : true;\n    },\n    openPopup3() {\n      this.popupView3 = this.popupView3 ? false : true;\n    },\n    openPopup4() {\n      this.popupView4 = this.popupView4 ? false : true;\n    },\n    openPopup5() {\n      this.popupView5 = this.popupView5 ? false : true;\n    },\n    sendLevel: function (level) {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockMarketMng/list/\",\n        params: {\n          market_level: level,\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        console.log(\"Success\", response);\n        alert(\"처리 완료\");\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to send StockMarketLevelMng\", error.response);\n      });\n    },\n    sendOrderList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/send/\",\n        params: {\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        alert(\"주문전송 완료\");\n        this.rowData1 = response.data;\n        if (response.data[0].message != \"\") alert(response.data[0].message);\n        console.log(\"Success\", response);\n        this.getOrderCompleteList();\n        this.getStockOrderList();\n      }).catch(error => {\n        alert(\"주문전송 실패\");\n        console.log(\"Failed to send OrderList\", error.response);\n      });\n    },\n    reload() {\n      this.getOrderCompleteList();\n      this.getStockOrderList();\n    },\n    getStockOrderList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/orderList/\",\n        params: {\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        console.log(\"Success1\", response);\n        this.rowData1 = response.data;\n        this.rowData1.forEach(data => {\n          data.acct_no = this.$route.params.acct_no;\n        });\n        this.rowData1.forEach(data => {\n          data.app_key = this.$route.params.app_key;\n        });\n        this.rowData1.forEach(data => {\n          data.app_secret = this.$route.params.app_secret;\n        });\n        this.rowData1.forEach(data => {\n          data.access_token = this.$route.params.access_token;\n        });\n      }).catch(error => {\n        console.log(\"Failed to get StockOrderList\", error.response);\n      });\n    },\n    getOrderCompleteList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrderComplete/\",\n        params: {\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        console.log(\"Success2\", response);\n        this.rowData2 = response.data;\n      }).catch(error => {\n        alert(\"처리 에러\");\n        console.log(\"Failed to get OrderCompleteList\", error.response);\n      });\n    }\n  },\n  created() {\n    this.getOrderCompleteList();\n    this.getStockOrderList();\n  }\n});","map":{"version":3,"mappings":"AAwFA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,6BAA4B;AAC/C,OAAOC,MAAK,MAAO,6BAA4B;AAC/C,OAAOC,MAAK,MAAO,mCAAkC;AACrD,OAAOC,MAAK,MAAO,gCAA+B;AAClD,OAAOC,MAAK,MAAO,+BAA8B;AACjD,SAASC,GAAG,EAAEC,eAAc,QAAS,KAAK;AAC1C,SAAQC,SAAS,QAAO,cAAc;AACtC,OAAO,sCAAsC;AAC7C,OAAO,8CAA8C;AACrD,OAAO,8CAA8C;AAErD,IAAIC,GAAE,GAAI,iDAAiD,EAAE;;AAE7D,eAAeF,eAAe,CAAC;EAC7BG,IAAI,EAAE,KAAK;EACXC,UAAU,EAAC;IACTH,SAAS;IACTP,MAAM;IACNC,MAAM;IACNC,MAAM;IACNC,MAAM;IACNC;EACF,CAAC;EACDO,KAAK,GAAE;IAEL,MAAMC,cAAa,GAAIP,GAAG,CAAC;MACzBQ,IAAI,EAAE,CAAC;MACPC,QAAQ,EAAE;MACV;IACF,CAAC,CAAC;;IAEF,MAAMC,cAAa,GAAIV,GAAG,CAAC;MACzBQ,IAAI,EAAE,CAAC;MACPC,QAAQ,EAAE;MACV;IACF,CAAC,CAAC;;IAEF,MAAME,QAAO,GAAIX,GAAG,CAAC,CACnB;MAACY,UAAU,EAAE,IAAI;MAAEC,KAAK,EAAE,CAAC;MAAEC,WAAW,EAAGC,MAAM,IAAK;QAAE,OAAOA,MAAM,CAACC,IAAI,CAACC,QAAO,GAAI;MAAE;IAAE,CAAC,EAC3F;MAACL,UAAU,EAAE,IAAI;MAAEM,KAAK,EAAE,KAAK;MAAEC,QAAQ,EAAE,IAAI;MAAEC,YAAY,EAAC,wBAAwB;MAAEC,UAAU,EAAE;IAAsB,CAAC,EAC3H;MAACT,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE;IAAM,CAAC,EACnC;MAACN,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE;IAAM,CAAC,EAClC;MAACN,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,WAAW;MAAEI,WAAW,EAAEP,MAAK,IAAK;QAC7D,IAAGA,MAAM,CAACQ,IAAI,CAACC,UAAS,KAAM,IAAG,IAAKT,MAAM,CAACQ,IAAI,CAACC,UAAS,KAAM,IAAI,EAAC;UACpET,MAAM,CAACQ,IAAI,CAACE,SAAQ,GAAIV,MAAM,CAACW,QAAQ;UAEvChC,KAAK,CAAC;YACJiC,MAAM,EAAE,KAAK;YACbxB,GAAG,EAAE,oDAAoD;YACzDY,MAAM,EAAC;cACLa,EAAE,EAAEb,MAAM,CAACQ,IAAI,CAACK,EAAE;cAClBC,QAAQ,EAAEd,MAAM,CAACQ,IAAI,CAACM,QAAQ;cAC9BJ,SAAS,EAAEV,MAAM,CAACW,QAAQ;cAC1BI,UAAU,EAAE,CAAC;cACbC,YAAY,EAAEhB,MAAM,CAACQ,IAAI,CAACS,UAAU;cACpCC,OAAO,EAAElB,MAAM,CAACQ,IAAI,CAACU,OAAO;cAC5BC,OAAO,EAAEnB,MAAM,CAACQ,IAAI,CAACW,OAAO;cAC5BC,UAAU,EAAEpB,MAAM,CAACQ,IAAI,CAACY,UAAU;cAClCC,YAAY,EAAErB,MAAM,CAACQ,IAAI,CAACa;YAC5B;UAEF,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;YAClBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,QAAQ;YAC/BG,KAAK,CAAC,UAAU;YAChB,IAAGH,QAAQ,CAACf,IAAI,CAAC,CAAC,CAAC,CAACmB,OAAM,IAAK,EAAE,EAC/BD,KAAK,CAACH,QAAQ,CAACf,IAAI,CAAC,CAAC,CAAC,CAACmB,OAAO;UAClC,CAAC,CAAC,CAACC,KAAK,CAACC,KAAI,IAAK;YAChBH,KAAK,CAAC,UAAU;YAChBF,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEI,KAAK,CAACN,QAAQ,CAAC;UACzD,CAAC,CAAC;UACF,OAAO,IAAI;QACb,CAAC,MAAI;UACH,OAAO,KAAK;QACd;MACF,CAAC;MAAEnB,QAAQ,EAAE,IAAI;MAAEE,UAAU,EAAE,kBAAkB;MAAEwB,gBAAgB,EAAE;QAAEC,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE;MAAQ,CAAC;MAAEC,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAO,GAAE,GAAIA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAE;MAAC;IAAE,CAAC,EAC1K;MAACtC,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,YAAY;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAC,GAAI,GAAG;MAAC;IAAE,CAAC,EACpH;MAACtC,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,YAAY;MAAEI,WAAW,EAAEP,MAAK,IAAK;QAC9D,IAAGA,MAAM,CAACQ,IAAI,CAACC,UAAS,KAAM,IAAG,IAAKT,MAAM,CAACQ,IAAI,CAACC,UAAS,KAAM,IAAI,EAAC;UACpET,MAAM,CAACQ,IAAI,CAACO,UAAS,GAAIf,MAAM,CAACW,QAAQ;UAExChC,KAAK,CAAC;YACJiC,MAAM,EAAE,KAAK;YACbxB,GAAG,EAAE,oDAAoD;YACzDY,MAAM,EAAC;cACLa,EAAE,EAAEb,MAAM,CAACQ,IAAI,CAACK,EAAE;cAClBC,QAAQ,EAAEd,MAAM,CAACQ,IAAI,CAACM,QAAQ;cAC9BJ,SAAS,EAAE,CAAC;cACZK,UAAU,EAAEf,MAAM,CAACW,QAAQ;cAC3BK,YAAY,EAAEhB,MAAM,CAACQ,IAAI,CAACS,UAAU;cACpCC,OAAO,EAAElB,MAAM,CAACQ,IAAI,CAACU,OAAO;cAC5BC,OAAO,EAAEnB,MAAM,CAACQ,IAAI,CAACW,OAAO;cAC5BC,UAAU,EAAEpB,MAAM,CAACQ,IAAI,CAACY,UAAU;cAClCC,YAAY,EAAErB,MAAM,CAACQ,IAAI,CAACa;YAC5B;UAEF,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;YAClBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,QAAQ;YAC/BG,KAAK,CAAC,UAAU;YAChB,IAAGH,QAAQ,CAACf,IAAI,CAAC,CAAC,CAAC,CAACmB,OAAM,IAAK,EAAE,EAC/BD,KAAK,CAACH,QAAQ,CAACf,IAAI,CAAC,CAAC,CAAC,CAACmB,OAAO;UAClC,CAAC,CAAC,CAACC,KAAK,CAACC,KAAI,IAAK;YAChBH,KAAK,CAAC,UAAU;YAChBF,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEI,KAAK,CAACN,QAAQ,CAAC;UACzD,CAAC,CAAC;UACF,OAAO,IAAI;QACb,CAAC,MAAI;UACH,OAAO,KAAK;QACd;MACF,CAAC;MAAEnB,QAAQ,EAAE,IAAI;MAAEE,UAAU,EAAE,kBAAkB;MAAEwB,gBAAgB,EAAE;QAAEC,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE;MAAQ,CAAC;MAAEC,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAO,GAAE,GAAIA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAE;MAAC;IAAE,CAAC,EAC1K;MAACtC,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,aAAa;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAC,GAAI,GAAG;MAAC;IAAE,CAAC,EACrH;MAACtC,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,YAAY;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAO,GAAE,GAAIA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAE;MAAC;IAAE,CAAC,EACpH;MAACtC,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,cAAc;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAO,GAAE,GAAIA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAE;MAAC;IAAE,CAAC,EACtH;MAACtC,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE,cAAc;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAI,KAAM,GAAE,GAAI,IAAG,GAAIlC,MAAM,CAACkC,KAAI,KAAM,GAAE,GAAI,IAAG,GAAI,EAAE;MAAA;IAAE,CAAC,EACjJ;MAACrC,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE;IAAU,CAAC,EACvC;MAACN,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE,YAAY;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAI,KAAM,IAAG,GAAI,MAAK,GAAIlC,MAAM,CAACkC,KAAI,KAAM,IAAG,GAAI,MAAK,GAAIlC,MAAM,CAACkC,KAAI,KAAM,IAAG,GAAI,MAAK,GAAIlC,MAAM,CAACkC,KAAI,KAAM,IAAG,GAAI,MAAK,GAAIlC,MAAM,CAACkC,KAAI,KAAM,IAAG,GAAI,MAAK,GAAI,EAAE;MAAA;IAAE,CAAC,EACxP;MAACrC,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,oBAAoB;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAC,GAAI,GAAG;MAAC;IAAE,CAAC,EAC5H;MAACtC,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,YAAY;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAC,GAAI,GAAG;MAAC;IAAE,CAAC,CACrH,CAAC;IAEF,MAAMC,QAAO,GAAInD,GAAG,CAAC,CACnB;MAACY,UAAU,EAAE,IAAI;MAAEC,KAAK,EAAE,CAAC;MAAEC,WAAW,EAAGC,MAAM,IAAK;QAAE,OAAOA,MAAM,CAACC,IAAI,CAACC,QAAO,GAAI;MAAE;IAAE,CAAC,EAC3F;MAACL,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE;IAAU,CAAC,EACvC;MAACN,UAAU,EAAE,OAAO;MAAEM,KAAK,EAAE;IAAc,CAAC,EAC5C;MAACN,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE;IAAY,CAAC,EACzC;MAACN,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE,UAAU;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACG,MAAM,CAAC,CAAC,EAAE,CAAC,IAAI,GAAE,GAAIrC,MAAM,CAACkC,KAAK,CAACG,MAAM,CAAC,CAAC,EAAC,CAAC,IAAI,GAAE,GAAIrC,MAAM,CAACkC,KAAK,CAACG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;MAAA;IAAE,CAAC,EAC3K;MAACxC,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE,WAAW;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACG,MAAM,CAAC,CAAC,EAAE,CAAC,IAAI,GAAE,GAAIrC,MAAM,CAACkC,KAAK,CAACG,MAAM,CAAC,CAAC,EAAC,CAAC,IAAI,GAAE,GAAIrC,MAAM,CAACkC,KAAK,CAACG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;MAAA;IAAE,CAAC,EAC5K;MAACxC,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,MAAM;MAAEmC,OAAO,EAAE,IAAI;MAAEC,YAAY,EAAE;IAAM,CAAC,EACvE;MAAC1C,UAAU,EAAE,KAAK;MAAEM,KAAK,EAAE,aAAa;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAO,GAAE,GAAIA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAE;MAAC;IAAE,CAAC,EACrH;MAACtC,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE,cAAc;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAC,GAAI,GAAG;MAAC;IAAE,CAAC,EACvH;MAACtC,UAAU,EAAE,OAAO;MAAEM,KAAK,EAAE,oBAAoB;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAC,GAAI,GAAG;MAAC;IAAE,CAAC,EAC9H;MAACtC,UAAU,EAAE,MAAM;MAAEM,KAAK,EAAE,YAAY;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAOA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAC,GAAI,GAAG;MAAC;IAAE,CAAC,EACrH;MAACtC,UAAU,EAAE,OAAO;MAAEM,KAAK,EAAE,oBAAoB;MAAE8B,cAAc,EAAGjC,MAAM,IAAK;QAAC,OAAO,GAAE,GAAIA,MAAM,CAACkC,KAAK,CAACC,cAAc,EAAE;MAAC;IAAE,CAAC,CAC/H,CAAC;IACF,OAAO;MACL3C,cAAc;MACdI,QAAQ;MACRD,cAAc;MACdyC;IACF;EACF,CAAC;EACD5B,IAAI,EAAE,MAAM;IACR,OAAO;MACHgC,UAAU,EAAE,KAAK;MACjBC,UAAU,EAAE,KAAK;MACjBC,UAAU,EAAE,KAAK;MACjBC,UAAU,EAAE,KAAK;MACjBC,UAAU,EAAE,KAAK;MACjBC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,OAAO;MACjBC,QAAQ,EAAE,GAAG;MACbC,OAAO,EAAE,CACP;QAAEC,IAAI,EAAE,IAAI;QAAEhB,KAAK,EAAE;MAAI,CAAC,EAC1B;QAAEgB,IAAI,EAAE,IAAI;QAAEhB,KAAK,EAAE;MAAI,EAC1B;MACD1B,IAAI,EAAE;QACF2C,IAAI,EAAE,EAAE;QACR9D,IAAI,EAAE,EAAE;QACRqB,SAAS,EAAE,EAAE;QACb0C,UAAU,EAAE,EAAE;QACdrC,UAAU,EAAE,EAAE;QACdsC,WAAW,EAAE,EAAE;QACfC,UAAU,EAAE,EAAE;QACdC,YAAY,EAAE;MAClB;IACJ,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACPC,WAAW,EAAE,YAAU;MACrB,IAAI,CAACZ,QAAQ,CAACa,OAAO,CAAClD,IAAG,IAAI;QAC3B,IAAGA,IAAI,CAACmD,GAAG,EAAC;UACV,IAAGnD,IAAI,CAACC,UAAS,KAAM,IAAI,EAAC;YAC1B9B,KAAK,CAAC;cACJiC,MAAM,EAAE,QAAQ;cAChBxB,GAAG,EAAEA,GAAE,GAAIoB,IAAI,CAACK,EAAC,GAAI,GAAG,CAAE;YAC5B,CAAC,CAAC,CAACS,IAAI,CAAEC,QAAQ,IAAK;cACpBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,QAAQ,CAAC;cAChCG,KAAK,CAAC,SAAS;cACf,IAAI,CAACkC,oBAAoB,EAAE;cAC3B,IAAI,CAACC,iBAAiB,EAAE;YAC1B,CAAC,CAAC,CAACjC,KAAK,CAAEC,KAAK,IAAK;cAClBL,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEI,KAAK,CAACN,QAAQ,CAAC;cACpDG,KAAK,CAAC,SAAS;YACjB,CAAC,CAAC;UACJ,CAAC,MAAI;YACHA,KAAK,CAAC,qBAAqB;UAC7B;QACF;MACF,CAAC;IACH,CAAC;IACDoC,WAAW,EAAE,YAAU;MACrB,IAAI,CAACjB,QAAQ,CAACa,OAAO,CAAClD,IAAG,IAAI;QAC3B,IAAGA,IAAI,CAACmD,GAAG,EAAC;UACV,IAAGnD,IAAI,CAACC,UAAS,KAAM,IAAG,IAAKD,IAAI,CAACC,UAAS,KAAM,IAAG,IAAKD,IAAI,CAACC,UAAS,KAAM,IAAI,EAAC;YAClF,IAAIsD,WAAU,GAAI;YAClB,IAAGvD,IAAI,CAACwD,YAAW,KAAM,GAAG,EAAC;cAC3BD,WAAU,GAAIvD,IAAI,CAACE,SAAQ;YAC7B,CAAC,MAAI;cACHqD,WAAU,GAAIvD,IAAI,CAACO,UAAS;YAC9B;YACApC,KAAK,CAAC;cACJiC,MAAM,EAAE,KAAK;cACbxB,GAAG,EAAE,oDAAoD;cACzDY,MAAM,EAAC;gBACLa,EAAE,EAAEL,IAAI,CAACK,EAAE;gBACXC,QAAQ,EAAEN,IAAI,CAACM,QAAQ;gBACvBiD,WAAW,EAAEA,WAAW;gBACxB/C,YAAY,EAAER,IAAI,CAACS,UAAU;gBAC7BC,OAAO,EAAEV,IAAI,CAACU,OAAO;gBACrBC,OAAO,EAAEX,IAAI,CAACW,OAAO;gBACrBC,UAAU,EAAEZ,IAAI,CAACY,UAAU;gBAC3BC,YAAY,EAAEb,IAAI,CAACa;cACrB;YACF,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;cACpBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,QAAQ,CAAC;cAChCG,KAAK,CAAC,SAAS;cACf,IAAI,CAACkC,oBAAoB,EAAE;cAC3B,IAAI,CAACC,iBAAiB,EAAE;YAC1B,CAAC,CAAC,CAACjC,KAAK,CAAEC,KAAK,IAAK;cAClBL,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEI,KAAK,CAACN,QAAQ,CAAC;cACpDG,KAAK,CAAC,SAAS;YACjB,CAAC,CAAC;UACJ,CAAC,MAAI;YACHA,KAAK,CAAC,qBAAqB;UAC7B;QACF;MACF,CAAC;IACH,CAAC;IACDuC,UAAU,GAAG;MACX,IAAI,CAACzB,UAAS,GAAK,IAAI,CAACA,UAAU,GAAI,KAAI,GAAI,IAAG;IACnD,CAAC;IACD0B,UAAU,GAAE;MACV,IAAI,CAACzB,UAAS,GAAK,IAAI,CAACA,UAAU,GAAI,KAAI,GAAI,IAAG;IACnD,CAAC;IACD0B,UAAU,GAAE;MACV,IAAI,CAACzB,UAAS,GAAK,IAAI,CAACA,UAAU,GAAI,KAAI,GAAI,IAAG;IACnD,CAAC;IACD0B,UAAU,GAAE;MACV,IAAI,CAACzB,UAAS,GAAK,IAAI,CAACA,UAAU,GAAI,KAAI,GAAI,IAAG;IACnD,CAAC;IACD0B,UAAU,GAAE;MACV,IAAI,CAACzB,UAAS,GAAK,IAAI,CAACA,UAAU,GAAI,KAAI,GAAI,IAAG;IACnD,CAAC;IACD0B,SAAS,EAAE,UAASC,KAAK,EAAC;MACxB5F,KAAK,CAAC;QACJiC,MAAM,EAAE,KAAK;QACbxB,GAAG,EAAE,sDAAsD;QAC3DY,MAAM,EAAC;UACLwE,YAAY,EAAED,KAAK;UACnBrD,OAAO,EAAE,IAAI,CAACuD,MAAM,CAACzE,MAAM,CAACkB,OAAO;UACnCC,OAAO,EAAE,IAAI,CAACsD,MAAM,CAACzE,MAAM,CAACmB,OAAO;UACnCC,UAAU,EAAE,IAAI,CAACqD,MAAM,CAACzE,MAAM,CAACoB,UAAU;UACzCC,YAAY,EAAE,IAAI,CAACoD,MAAM,CAACzE,MAAM,CAACqB;QACnC;MAEF,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;QAClBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,QAAQ;QAC/BG,KAAK,CAAC,OAAO;MACf,CAAC,CAAC,CAACE,KAAK,CAACC,KAAI,IAAK;QAChBH,KAAK,CAAC,OAAO;QACbF,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEI,KAAK,CAACN,QAAQ,CAAC;MACnE,CAAC,CAAC;IACJ,CAAC;IACDmD,aAAa,GAAG;MACd/F,KAAK,CAAC;QACJiC,MAAM,EAAE,KAAK;QACbxB,GAAG,EAAE,kDAAkD;QACvDY,MAAM,EAAC;UACLkB,OAAO,EAAE,IAAI,CAACuD,MAAM,CAACzE,MAAM,CAACkB,OAAO;UACnCC,OAAO,EAAE,IAAI,CAACsD,MAAM,CAACzE,MAAM,CAACmB,OAAO;UACnCC,UAAU,EAAE,IAAI,CAACqD,MAAM,CAACzE,MAAM,CAACoB,UAAU;UACzCC,YAAY,EAAE,IAAI,CAACoD,MAAM,CAACzE,MAAM,CAACqB;QACnC;MACF,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;QAClBG,KAAK,CAAC,SAAS;QACf,IAAI,CAACmB,QAAO,GAAItB,QAAQ,CAACf,IAAI;QAC7B,IAAGe,QAAQ,CAACf,IAAI,CAAC,CAAC,CAAC,CAACmB,OAAM,IAAK,EAAE,EAC/BD,KAAK,CAACH,QAAQ,CAACf,IAAI,CAAC,CAAC,CAAC,CAACmB,OAAO;QAChCH,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,QAAQ,CAAC;QAChC,IAAI,CAACqC,oBAAoB,EAAE;QAC3B,IAAI,CAACC,iBAAiB,EAAE;MAC1B,CAAC,CAAC,CAACjC,KAAK,CAACC,KAAI,IAAK;QACdH,KAAK,CAAC,SAAS;QACfF,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEI,KAAK,CAACN,QAAQ,CAAC;MAC3D,CAAC,CAAC;IACJ,CAAC;IACDoD,MAAM,GAAE;MACN,IAAI,CAACf,oBAAoB,EAAE;MAC3B,IAAI,CAACC,iBAAiB,EAAE;IAC1B,CAAC;IACDA,iBAAiB,GAAG;MAClBlF,KAAK,CAAC;QACJiC,MAAM,EAAE,KAAK;QACbxB,GAAG,EAAE,uDAAuD;QAC5DY,MAAM,EAAC;UACLkB,OAAO,EAAE,IAAI,CAACuD,MAAM,CAACzE,MAAM,CAACkB,OAAO;UACnCC,OAAO,EAAE,IAAI,CAACsD,MAAM,CAACzE,MAAM,CAACmB,OAAO;UACnCC,UAAU,EAAE,IAAI,CAACqD,MAAM,CAACzE,MAAM,CAACoB,UAAU;UACzCC,YAAY,EAAE,IAAI,CAACoD,MAAM,CAACzE,MAAM,CAACqB;QACnC;MACF,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;QAClBC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEF,QAAQ,CAAC;QACjC,IAAI,CAACsB,QAAO,GAAItB,QAAQ,CAACf,IAAI;QAC7B,IAAI,CAACqC,QAAQ,CAACa,OAAO,CAAClD,IAAG,IAAK;UAACA,IAAI,CAACU,OAAM,GAAI,IAAI,CAACuD,MAAM,CAACzE,MAAM,CAACkB,OAAO;QAAA,CAAC;QACzE,IAAI,CAAC2B,QAAQ,CAACa,OAAO,CAAClD,IAAG,IAAK;UAACA,IAAI,CAACW,OAAM,GAAI,IAAI,CAACsD,MAAM,CAACzE,MAAM,CAACmB,OAAO;QAAA,CAAC;QACzE,IAAI,CAAC0B,QAAQ,CAACa,OAAO,CAAClD,IAAG,IAAK;UAACA,IAAI,CAACY,UAAS,GAAI,IAAI,CAACqD,MAAM,CAACzE,MAAM,CAACoB,UAAU;QAAA,CAAC;QAC/E,IAAI,CAACyB,QAAQ,CAACa,OAAO,CAAClD,IAAG,IAAK;UAACA,IAAI,CAACa,YAAW,GAAI,IAAI,CAACoD,MAAM,CAACzE,MAAM,CAACqB,YAAY;QAAA,CAAC;MACrF,CAAC,CAAC,CAACO,KAAK,CAACC,KAAI,IAAK;QAChBL,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEI,KAAK,CAACN,QAAQ,CAAC;MAC7D,CAAC,CAAC;IACJ,CAAC;IACDqC,oBAAoB,GAAG;MACrBjF,KAAK,CAAC;QACJiC,MAAM,EAAE,KAAK;QACbxB,GAAG,EAAE,qDAAqD;QAC1DY,MAAM,EAAC;UACLkB,OAAO,EAAE,IAAI,CAACuD,MAAM,CAACzE,MAAM,CAACkB,OAAO;UACnCC,OAAO,EAAE,IAAI,CAACsD,MAAM,CAACzE,MAAM,CAACmB,OAAO;UACnCC,UAAU,EAAE,IAAI,CAACqD,MAAM,CAACzE,MAAM,CAACoB,UAAU;UACzCC,YAAY,EAAE,IAAI,CAACoD,MAAM,CAACzE,MAAM,CAACqB;QACnC;MACF,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;QAClBC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEF,QAAQ,CAAC;QACjC,IAAI,CAACuB,QAAO,GAAIvB,QAAQ,CAACf,IAAI;MAC/B,CAAC,CAAC,CAACoB,KAAK,CAACC,KAAI,IAAK;QAChBH,KAAK,CAAC,OAAO;QACbF,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEI,KAAK,CAACN,QAAQ,CAAC;MAChE,CAAC,CAAC;IACJ;EACF,CAAC;EACDqD,OAAO,GAAE;IACP,IAAI,CAAChB,oBAAoB,EAAE;IAC3B,IAAI,CAACC,iBAAiB,EAAE;EAC1B;AACF,CAAC,CAAC","names":["axios","PopUp1","PopUp2","PopUp3","PopUp4","PopUp5","ref","defineComponent","AgGridVue","url","name","components","setup","defaultColDef1","flex","minWidth","defaultColDef2","colDefs1","headerName","colId","valueGetter","params","node","rowIndex","field","editable","cellRenderer","cellEditor","valueSetter","data","order_stat","buy_price","newValue","method","id","order_no","sell_price","order_amount","remain_qty","acct_no","app_key","app_secret","access_token","then","response","console","log","alert","message","catch","error","cellEditorParams","min","max","valueFormatter","value","toLocaleString","colDefs2","substr","tooltip","tolltipField","popupView1","popupView2","popupView3","popupView4","popupView5","rowData1","rowData2","radioSel","selected","options","text","code","buy_amount","sell_amount","loss_price","target_price","methods","deleteOrder","forEach","chk","getOrderCompleteList","getStockOrderList","cancelOrder","order_price","trading_type","openPopup1","openPopup2","openPopup3","openPopup4","openPopup5","sendLevel","level","market_level","$route","sendOrderList","reload","created"],"sourceRoot":"","sources":["/home/terra/Github/fund_risk_management/src/views/StockOrder.vue"],"sourcesContent":["<template>\n  <div>\n    <v-container fluid>\n      <v-row>\n        <v-col>\n          <v-btn @click=\"reload()\" style=\"background: skyblue\">재조회</v-btn>\n          <v-btn @click=\"sendOrderList\" style=\"background: rgb(101, 126, 234)\">주문전송</v-btn>\n          <v-btn @click=\"openPopup1()\" style=\"background: rgb(102, 174, 205)\">주문등록</v-btn>\n          <v-btn @click=\"openPopup2()\" style=\"background: pink\">종목정보</v-btn>            \n          <v-btn @click=\"openPopup3()\" style=\"background: orange\">장중동향</v-btn>\n          <v-btn @click=\"openPopup4()\" style=\"background: sienna\">관심종목</v-btn>\n          <v-btn @click=\"openPopup5()\" style=\"background: rgb(125, 160, 45)\">종목검색</v-btn>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n  <div class=\"popup-view\" :class=\"{active: popupView1}\">\n    <pop-up1 @close-popup=\"openPopup1()\"></pop-up1>\n  </div>\n  <div class=\"popup-view\" :class=\"{active: popupView2}\">\n    <pop-up2 @close-popup=\"openPopup2()\"></pop-up2>\n  </div>\n  <div class=\"popup-view\" :class=\"{active: popupView3}\">\n    <pop-up3 @close-popup=\"openPopup3()\"></pop-up3>\n  </div>\n  <div class=\"popup-view\" :class=\"{active: popupView4}\">\n    <pop-up4 @close-popup=\"openPopup4()\"></pop-up4>\n  </div>\n  <div class=\"popup-view\" :class=\"{active: popupView5}\">\n    <pop-up5 @close-popup=\"openPopup5()\"></pop-up5>\n  </div>\n  <div>\n    <v-container fluid>\n      <v-row>\n        <v-col align=\"left\">\n          <v-subheader>\n            [일별 주문 내역]\n          </v-subheader>\n        </v-col>\n        <v-col align=\"right\">\n          <v-btn @click=\"deleteOrder()\" style=\"background: hwb(349 0% 0%)\">[주문삭제]</v-btn>\n          <v-btn @click=\"cancelOrder()\" style=\"background: hsl(64, 70%, 61%)\">[주문취소]</v-btn>\n        </v-col>\n      </v-row>\n      <ag-grid-vue \n        style=\"width: 100%; height: 300px;\" \n        class=\"ag-theme-balham\" \n        :columnDefs=\"colDefs1\" \n        :rowData=\"rowData1\" \n        :paginationAutoPageSize=\"true\"\n        :pagination=\"true\"\n        :defaultColDef=\"defaultColDef1\"\n        @cellClicked=\"onCellClicked\"\n      />\n    </v-container>\n  </div>\n  <div>\n    <v-container fluid>\n      <v-row>\n        <v-col align=\"left\">\n          <v-subheader>\n            [일별 주문 체결]\n          </v-subheader>\n        </v-col>\n      </v-row>\n      <ag-grid-vue \n        style=\"width: 100%; height: 300px;\" \n        class=\"ag-theme-balham\" \n        :columnDefs=\"colDefs2\" \n        :rowData=\"rowData2\" \n        :paginationAutoPageSize=\"true\"\n        :pagination=\"true\"\n        :defaultColDef=\"defaultColDef2\"\n        @cellClicked=\"onCellClicked\"\n      />\n      <v-row>\n        <v-col>\n          <v-btn @click=\"sendLevel(1)\" style=\"background: lightyellow\">[하락지속 기술적반등]</v-btn>\n          <v-btn @click=\"sendLevel(2)\" style=\"background: lightsteelblue\">[단기추세 기술적반등]</v-btn>\n          <v-btn @click=\"sendLevel(3)\" style=\"background: greenyellow\">[패턴 기술적반등]</v-btn>\n          <v-btn @click=\"sendLevel(4)\" style=\"background: greenyellow\">[추세전환 눌림반등]</v-btn>\n          <v-btn @click=\"sendLevel(5)\" style=\"background: greenyellow\">[상승지속 기술적반등]</v-btn>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>  \n</template>\n<script>\nimport axios from \"axios\";\nimport PopUp1 from '../components/OrderInfo.vue'\nimport PopUp2 from '../components/StockInfo.vue'\nimport PopUp3 from '../components/SubjectSubTotal.vue'\nimport PopUp4 from '../components/InterestItem.vue'\nimport PopUp5 from '../components/StockSearch.vue'\nimport { ref, defineComponent } from 'vue';\nimport {AgGridVue} from 'ag-grid-vue3';\nimport 'ag-grid-community/styles/ag-grid.css';\nimport 'ag-grid-community/styles/ag-theme-balham.css';\nimport 'ag-grid-community/styles/ag-theme-quartz.css';\n\nlet url = \"http://phills2.gonetis.com:8000/kis/stockOrder/\"; //장고 서버 주소\n\nexport default defineComponent({\n  name: 'App',\n  components:{\n    AgGridVue,\n    PopUp1,\n    PopUp2,\n    PopUp3,\n    PopUp4,\n    PopUp5,\n  },\n  setup(){\n\n    const defaultColDef1 = ref({\n      flex: 1,\n      minWidth: 100,\n      //editable: true,\n    });\n\n    const defaultColDef2 = ref({\n      flex: 1,\n      minWidth: 100,\n      //editable: true,\n    });\n\n    const colDefs1 = ref([\n      {headerName: 'No', colId: 0, valueGetter: (params) => { return params.node.rowIndex + 1 } },\n      {headerName: '선택', field: 'chk', editable: true, cellRenderer:'agCheckboxCellRenderer', cellEditor: 'agCheckboxCellEditor'},\n      {headerName: '종목코드', field: 'code'},\n      {headerName: '종목명', field: 'name'},\n      {headerName: '매수가', field: 'buy_price', valueSetter: params => {\n        if(params.data.order_stat === '02' || params.data.order_stat === '05'){                       \n          params.data.buy_price = params.newValue;\n\n          axios({\n            method: \"GET\",\n            url: \"http://phills2.gonetis.com:8000/stockOrder/update/\",\n            params:{\n              id: params.data.id,\n              order_no: params.data.order_no,\n              buy_price: params.newValue,\n              sell_price: 0,\n              order_amount: params.data.remain_qty,\n              acct_no: params.data.acct_no,\n              app_key: params.data.app_key,\n              app_secret: params.data.app_secret,\n              access_token: params.data.access_token\n            }\n            \n          }).then(response => {\n            console.log(\"Success\", response)\n            alert(\"매수가변경 완료\")\n            if(response.data[0].message != \"\")\n              alert(response.data[0].message)\n          }).catch(error => {\n            alert(\"매수가변경 실패\")\n            console.log(\"Failed to updateBuyOrder\", error.response);\n          });\n          return true;\n        }else{\n          return false;\n        }\n      }, editable: true, cellEditor: 'agTextCellEditor', cellEditorParams: { min: 0, max: 9999999 }, valueFormatter: (params) => {return '￦' + params.value.toLocaleString();},},\n      {headerName: '매수량', field: 'buy_amount', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n      {headerName: '매도가', field: 'sell_price', valueSetter: params => {\n        if(params.data.order_stat === '02' || params.data.order_stat === '05'){       \n          params.data.sell_price = params.newValue;\n          \n          axios({\n            method: \"GET\",\n            url: \"http://phills2.gonetis.com:8000/stockOrder/update/\",\n            params:{\n              id: params.data.id,\n              order_no: params.data.order_no,\n              buy_price: 0,\n              sell_price: params.newValue,\n              order_amount: params.data.remain_qty,\n              acct_no: params.data.acct_no,\n              app_key: params.data.app_key,\n              app_secret: params.data.app_secret,\n              access_token: params.data.access_token\n            }\n                  \n          }).then(response => {\n            console.log(\"Success\", response)\n            alert(\"매도가변경 완료\")\n            if(response.data[0].message != \"\")\n              alert(response.data[0].message)\n          }).catch(error => {\n            alert(\"매도가변경 실패\")\n            console.log(\"Failed to updateBuyOrder\", error.response);\n          });\n          return true;\n        }else{\n          return false;\n        }\n      }, editable: true, cellEditor: 'agTextCellEditor', cellEditorParams: { min: 0, max: 9999999 }, valueFormatter: (params) => {return '￦' + params.value.toLocaleString();},},\n      {headerName: '매도량', field: 'sell_amount', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n      {headerName: '손절가', field: 'loss_price', valueFormatter: (params) => {return '￦' + params.value.toLocaleString();},},\n      {headerName: '목표가', field: 'target_price', valueFormatter: (params) => {return '￦' + params.value.toLocaleString();},},\n      {headerName: '매매유형', field: 'trading_type', valueFormatter: (params) => {return params.value === 'B' ? '매수' : params.value === 'S' ? '매도' : ''},},\n      {headerName: '주문번호', field: 'order_no'},\n      {headerName: '주문상태', field: 'order_stat', valueFormatter: (params) => {return params.value === '01' ? '주문등록' : params.value === '02' ? '주문전송' : params.value === '03' ? '주문체결' : params.value === '04' ? '주문취소' : params.value === '05' ? '주문정정' : ''},},\n      {headerName: '체결량', field: 'total_complete_qty', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n      {headerName: '잔여량', field: 'remain_qty', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n    ]);\n\n    const colDefs2 = ref([\n      {headerName: 'No', colId: 0, valueGetter: (params) => { return params.node.rowIndex + 1 } },\n      {headerName: '주문번호', field: 'order_no'},\n      {headerName: '원주문번호', field: 'org_order_no'},\n      {headerName: '주문구분', field: 'order_type'},\n      {headerName: '주문일자', field: 'order_dt', valueFormatter: (params) => {return params.value.substr(0, 4) + \"-\" + params.value.substr(4,2) + \"-\" + params.value.substr(6, 2)},},\n      {headerName: '주문시각', field: 'order_tmd', valueFormatter: (params) => {return params.value.substr(0, 2) + \":\" + params.value.substr(2,2) + \":\" + params.value.substr(4, 2)},},\n      {headerName: '종목명', field: 'name', tooltip: true, tolltipField: 'name'},\n      {headerName: '주문가', field: 'order_price', valueFormatter: (params) => {return '￦' + params.value.toLocaleString();},},\n      {headerName: '주문수량', field: 'order_amount', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n      {headerName: '총체결수량', field: 'total_complete_qty', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n      {headerName: '잔여수량', field: 'remain_qty', valueFormatter: (params) => {return params.value.toLocaleString() + '주';},},\n      {headerName: '총체결금액', field: 'total_complete_amt', valueFormatter: (params) => {return '￦' + params.value.toLocaleString();},},\n    ]);\n    return {\n      defaultColDef1,\n      colDefs1,\n      defaultColDef2,\n      colDefs2\n    }\n  },\n  data: () => {\n      return {\n          popupView1: false,\n          popupView2: false,\n          popupView3: false,\n          popupView4: false,\n          popupView5: false,\n          rowData1: [],\n          rowData2: [],\n          radioSel: 'limit',\n          selected: 'B',\n          options: [\n            { text: '매수', value: 'B' },\n            { text: '매도', value: 'S' }          \n          ],\n          data: {\n              code: \"\",\n              name: \"\",\n              buy_price: \"\",\n              buy_amount: \"\",\n              sell_price: \"\",\n              sell_amount: \"\",\n              loss_price: \"\",\n              target_price: \"\",\n          },\n      };\n  },\n  methods: {\n    deleteOrder: function(){\n      this.rowData1.forEach(data =>{\n        if(data.chk){\n          if(data.order_stat === '01'){\n            axios({\n              method: \"DELETE\",\n              url: url + data.id + \"/\", // http://phills2.gonetis.com:8000/kis/stockOrder/1 로 delete 이벤트 전송\n            }).then((response) => {\n              console.log(\"Success\", response);\n              alert(\"주문삭제 완료\")\n              this.getOrderCompleteList();\n              this.getStockOrderList();\n            }).catch((error) => {\n              console.log(\"Failed to deleteOrder\", error.response);\n              alert(\"주문삭제 실패\")\n            });\n          }else{\n            alert(\"주문삭제 대상 주문상태가 아닙니다.\")\n          }\n        } \n      })\n    },\n    cancelOrder: function(){\n      this.rowData1.forEach(data =>{\n        if(data.chk){\n          if(data.order_stat === '02' || data.order_stat === '03' || data.order_stat === '05'){\n            let order_price = 0\n            if(data.trading_type === 'B'){\n              order_price = data.buy_price\n            }else{\n              order_price = data.sell_price\n            }  \n            axios({\n              method: \"GET\",\n              url: \"http://phills2.gonetis.com:8000/stockOrder/cancel/\",\n              params:{\n                id: data.id,\n                order_no: data.order_no,\n                order_price: order_price,\n                order_amount: data.remain_qty,\n                acct_no: data.acct_no,\n                app_key: data.app_key,\n                app_secret: data.app_secret,\n                access_token: data.access_token\n              }\n            }).then((response) => {\n              console.log(\"Success\", response);\n              alert(\"주문취소 완료\")\n              this.getOrderCompleteList();\n              this.getStockOrderList();\n            }).catch((error) => {\n              console.log(\"Failed to cancelOrder\", error.response);\n              alert(\"주문취소 실패\")\n            });\n          }else{\n            alert(\"주문취소 대상 주문상태가 아닙니다.\")\n          }\n        } \n      })\n    },\n    openPopup1() {\n      this.popupView1 = (this.popupView1) ? false : true\n    },\n    openPopup2(){\n      this.popupView2 = (this.popupView2) ? false : true\n    },\n    openPopup3(){\n      this.popupView3 = (this.popupView3) ? false : true\n    },\n    openPopup4(){\n      this.popupView4 = (this.popupView4) ? false : true\n    },\n    openPopup5(){\n      this.popupView5 = (this.popupView5) ? false : true\n    },\n    sendLevel: function(level){\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockMarketMng/list/\",\n        params:{\n          market_level: level,\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n        \n      }).then(response => {\n        console.log(\"Success\", response)\n        alert(\"처리 완료\")\n      }).catch(error => {\n        alert(\"처리 에러\")\n        console.log(\"Failed to send StockMarketLevelMng\", error.response);\n      });\n    },\n    sendOrderList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/send/\",\n        params:{\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        alert(\"주문전송 완료\")\n        this.rowData1 = response.data;\n        if(response.data[0].message != \"\")\n          alert(response.data[0].message)\n        console.log(\"Success\", response);\n        this.getOrderCompleteList();\n        this.getStockOrderList();\n      }).catch(error => {\n          alert(\"주문전송 실패\")\n          console.log(\"Failed to send OrderList\", error.response);\n      });\n    },\n    reload(){\n      this.getOrderCompleteList();\n      this.getStockOrderList();\n    },  \n    getStockOrderList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrder/orderList/\",\n        params:{\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        console.log(\"Success1\", response);\n        this.rowData1 = response.data;\n        this.rowData1.forEach(data => {data.acct_no = this.$route.params.acct_no})\n        this.rowData1.forEach(data => {data.app_key = this.$route.params.app_key})\n        this.rowData1.forEach(data => {data.app_secret = this.$route.params.app_secret})\n        this.rowData1.forEach(data => {data.access_token = this.$route.params.access_token})\n      }).catch(error => {\n        console.log(\"Failed to get StockOrderList\", error.response);\n      });\n    },\n    getOrderCompleteList() {\n      axios({\n        method: \"GET\",\n        url: \"http://phills2.gonetis.com:8000/stockOrderComplete/\",\n        params:{\n          acct_no: this.$route.params.acct_no,\n          app_key: this.$route.params.app_key,\n          app_secret: this.$route.params.app_secret,\n          access_token: this.$route.params.access_token\n        }\n      }).then(response => {\n        console.log(\"Success2\", response);\n        this.rowData2 = response.data;\n      }).catch(error => {\n        alert(\"처리 에러\")\n        console.log(\"Failed to get OrderCompleteList\", error.response);\n      });\n    },\n  },\n  created(){\n    this.getOrderCompleteList();\n    this.getStockOrderList();\n  }\n});\n\n</script>\n<style>\n.popup-view{\nopacity: 0;\ndisplay: none;\nvisibility: hidden;\n}\n.active{\nopacity: 1;\ndisplay: block;\nvisibility: visible;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}